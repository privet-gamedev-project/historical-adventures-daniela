!function(e){var t={};function i(n){if(t[n])return t[n].exports;var o=t[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,i),o.l=!0,o.exports}i.m=e,i.c=t,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)i.d(n,o,function(t){return e[t]}.bind(null,o));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="./",i(i.s=0)}([function(e,t,i){e.exports=i(1)},function(e,t,i){"use strict";i.r(t);var n={DB:{DBNAME:"gamedatav0_04"},Levels:{MENU:"Menu",SETTINGSLEVEL:"SettingsLevel",LEVELSELECT:"LevelSelect",CREDITS:"Credits",SCORES:"Scores",BONUSLEVEL:"BonusLevel",INTROSTORY:"IntroStory",LEVEL1:"Level1",LEVEL2:"Level2",LEVEL3:"Level3",LEVEL4:"Level4",LEVEL5:"Level5",LEVEL6:"Level6",GAMEOVER:"GameOver",UI:"UI"},Sound:{LEVEL0:{DANIELA_MUM:"Level0_MOTHER_WhereAreYou_01",DANIELA_ANSWER:"Level0_DANIELA_5Mins_02",BSO:"LevelIntro_BSO"},LEVEL1:{FINDBRACELET:"Level1_LOLO_MagicBracelet_03",BSO:"Level1_BSO"},LEVEL2:{DANIELA_QUESTION:"Level2_DANIELA_WhereDidYouGetThat_05",FINDCLOTHES:"Level2_LOLO_ToBeAbleToContinue_06",LOLO_ANSWER:"Level2_LOLO_LookWhatIHaveFound_13",LOLO_NOTE:"Level2_LOLO_LookForTheMap_14",LOLO_TASK:"Level2_LOLO_YouHaveToFindTheLever_15",BSO:"Level2_BSO"},Level3:{DANIELA_QUESTION:"Level3_DANIELA_WhatAProblem_07",LOLO_ANSWER:"Level3_LOLO_YouHaveToGiveMammoth_08",BSO:"Level3_BSO"},Level4:{BSO:"Level4_BSO"},LEVEL5:{LOLO_TASK:"Level5_LOLO_YouWillHaveToCatch_09",DANIELA_FRUITS:"Level5_DANIELA_ThatFruitLooksSoGood_10",LOLO_NOTE:"Level5_LOLO_InOrderToCatchTheFruit_11",BSO:"Level5_BSO"},LEVEL6:{DANIELA:"Level6_DANIELA_OhIBurntMyself_12",LOLO_TASK:"Level6_LOLO_GetAllTheObjects_17",BSO:"Level6_BSO"},LEVELALL:{WEDIDIT:"LevelAll_DANIELA_WeDidIt_04",RECOVERONELIFE:"LevelAll_LOLO_RecoverOnleLife_16"},BONUSLEVEL:{COINPICKUP:"coinpickup",LOLO_AUCH:"lolo_auch",BSO:"BonusLevel_BSO"},SOUNDS:{CAVEBATS:"CaveBats",DANIELA_JUMP:"soundJump",DANIELA_AUCH:"danielaAuch",LEVELUP:"levelUp",BIRD_SINGING:"BirdSinging"},MAIN:{BSO:"Main_BSO"}},Sprites:{Bats:{KEY:"bats",ID:"bat",OBJECT_NAME:"Bats",OBJECT_ID:"Bat"},Bees:{KEY:"bee",ID:"bee",OBJECT_NAME:"Bees",OBJECT_ID:"Bee"},Soda:{KEY:"soda",ID:"soda",OBJECT_NAME:"Sodas",OBJECT_ID:"Soda"},Snails:{KEY:"snail",ID:"snail",OBJECT_NAME:"Snails",OBJECT_ID:"Snail"},Wheel:{KEY:"wheel",ID:"wheel",OBJECT_NAME:"Wheels",OBJECT_ID:"Wheel"},Donut:{KEY:"donut",ID:"donut",OBJECT_NAME:"Donuts",OBJECT_ID:"Donut"},Bracelet:{KEY:"bracelet"},ExtraPoint:{KEY:"extrapoint",ID:"extrapoint",OBJECT_NAME:"ExtraPoints",OBJECT_ID:"extrapoint"},Star:{KEY:"star"},Play:{KEY:"play"},Play2:{KEY:"play2"},Lock:{KEY:"lock"},Cavemen_Clothes:{KEY:"caveman_clothes"},Mamut:{KEY:"mamut"},EndLevel:{OBJECT_NAME:"EndLevel",OBJECT_ID:"positionEnd"},Daniela:{KEY:"daniela"},DanielaTroglo:{KEY:"daniela-troglodita"},Lolo_Normal:{KEY:"lolo_normal"},Level_Price:{KEY:"coin"},Fire:{KEY:"fire"},Joystick:{KEY:"joystick"},Lianas:{KEY:"liana",ID:"liana",OBJECT_NAME:"lianasPoints",OBJECT_ID:"liana"},EndOfLianas:{KEY:"endOfLiana",ID:"endOfLiana",OBJECT_NAME:"lianasPoints",OBJECT_ID:"endOfLiana"},Crocodile:{KEY:"crocodile",ID:"crocodile",OBJECT_NAME:"Crocodiles",OBJECT_ID:"Crocodile"},Dinowater:{KEY:"dinowater",ID:"dinowater",OBJECT_NAME:"Dinowaters",OBJECT_ID:"Dinowater"},Dinobird:{KEY:"dinobird",ID:"dinobird",OBJECT_NAME:"Dinobirds",OBJECT_ID:"Dinobird"},Spike:{KEY:"Spike"},Limit:{KEY:"Limit"},INVISIBLE:"invisible",PUZZLEPIECE:"puzzlepiece"},Enemies_Layers:{Level1:{BATS:"Bats",WHEELS:"Wheels"},Level2:{BEES:"Bees",SNAILS:"Snails"},Level3:{SODAS:"Sodas",DONUTS:"Donuts"},Level4:{CROCODILES:"Crocodiles"},Level6:{DINOWATERS:"Dinowaters",DINOBIRD:"Dinobirds"}},Textures:{BG_MENU:"bg_Menu",BG_LEVEL1:"bg_Level1",BG_LEVEL2:"bg_Level2",BG_LEVEL3:"bg_Level3",BG_LEVEL4:"bg_Level4",BG_LEVEL5:"bg_Level5",BG_LEVEL6:"bg_Level6",BG_CREDITS:"Credits",BG_CREDITS_PAGE2:"creditsPage2",PLATFORM_FOREST:"platform"},Anims:{BATS:"bat_move",BEES:"bee_fly",SODAS:"soda_fly",SNAILS:"snail_move",WHEEL:"wheel_move",DONUT:"donut_move",BRACELET:"bracelet_move",EXTRAPOINT:"extrapoint_rotate",CAVEMAN_CLOTHES:"caveman_clothes_move",JOYSTICK:"joystick_move",CROCODILE:"swim",DINOWATER:"dinowater_move",DINOBIRD:"dinobird_move",MAMUT:{SLEEP:"mamut_sleep",HAPPY:"mamut_happy"},Daniela:{IDLE:"daniela_idle",WALK:"daniela_walk",DOWN:"daniela_down",CLIMB:"daniela_climb"},DanielaTroglo:{IDLE:"daniela-troglodita_idle",WALK:"daniela-troglodita_walk",DOWN:"daniela-troglodita_down",CLIMB:"daniela-troglodita_climb"},LOLO:{NORMAL_FLY:"lolo_normal_fly"},Direction:{RIGHT:"right",LEFT:"left",UP:"up",DOWN:"down",JUMP:"jump",IDLE:"idle"},MAP:"map_shine",PUZZLEPIECE:"puzzlepiece_move"},UI:{VOLUMEON:"volumeOn",VOLUMEOFF:"volumeOff"},Fonts:{PIXEL:"pixel"},Texts:{BUSCAR_PULSERA:"Daniela tienes que buscar la Pulsera magica",BUSCAR_ROPA_TROGLODITA:"Daniela, tienes que buscar la ropa de Troglodita.",VIDAS:"VIDAS ",CONSEGUIDO:"Bien!! Lo hemos Conseguido!!"},Tiles:{CAVE_STONE:"caveStones",FOREST_PACK:"forestPack_32x32",GRASS_TILES:"grasstiles",JUNGLE:"jungle",WOODS:"woods",VOLCANO:"spritesheet"},Layers:{WORLD:"World",LANDSCAPE:"Landscape",SPIKES:"Spikes",LIMITS:"Limits"},Events:{GAME_OVER:"GameOver",LEVEL_FINISHED:"Win",MENU:"Menu"},Settings:{FLAG_ES:"es_flag",FLAG_EN:"en_flag",FLAG_IT:"it_flag",FLAG_DE:"de_flag"}};function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function s(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function a(e,t){return!t||"object"!==o(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function r(e){return(r=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function l(e,t){return(l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var c=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),a(this,r(t).call(this,{key:"UI"}))}var i,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}(t,Phaser.Scene),i=t,(o=[{key:"init",value:function(e){this.scenename=e.scene}},{key:"preload",value:function(){}},{key:"create",value:function(){var e=this;this.height=this.cameras.main.height,this.width=this.cameras.main.width,this.sys.game.device.input.touch&&this.scenename!=n.Levels.BONUSLEVEL&&this.createControls();var t=this.add.dynamicBitmapText(this.width-100,20,"pixel",this.TG.tr("LEVELSELECT.MENU"));t.setInteractive(),t.on("pointerdown",function(){e.registry.events.emit(n.Events.MENU)})}},{key:"createControls",value:function(){var e=this;this.input.addPointer(2),this.leftBtn=this.add.sprite(100,0,"controlLeft").setInteractive(),this.rightBtn=this.add.sprite(350,0,"controlRight").setInteractive(),this.jumpBtn=this.add.sprite(this.width+300,-225,"controlUp").setInteractive(),this.downBtn=this.add.sprite(this.width+300,0,"controlDown").setInteractive(),this.leftBtn.on("pointerdown",function(){e.registry.events.emit("controlLeftON")}),this.leftBtn.on("pointerup",function(){e.registry.events.emit("controlLeftOFF")}),this.rightBtn.on("pointerdown",function(){e.registry.events.emit("controlRightON")}),this.rightBtn.on("pointerup",function(){e.registry.events.emit("controlRightOFF")}),this.jumpBtn.on("pointerdown",function(){e.registry.events.emit("controlJumpON")}),this.jumpBtn.on("pointerup",function(){e.registry.events.emit("controlJumpOFF")}),this.downBtn.on("pointerdown",function(){e.registry.events.emit("controlDownON")}),this.downBtn.on("pointerup",function(){e.registry.events.emit("controlDownOFF")});var t=this.add.container(50,this.height-90);t.add([this.leftBtn,this.rightBtn,this.jumpBtn,this.downBtn]),t.setScale(.6).setAlpha(.8).setScrollFactor(0).setDepth(5)}}])&&s(i.prototype,o),t}();function u(e){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function h(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function d(e){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function p(e,t){return(p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function f(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var y=function(e){function t(e){var i,o;!function(e,i){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this),o=d(t).call(this,e.scene,e.x,e.y,e.key),(i=!o||"object"!==u(o)&&"function"!=typeof o?f(this):o).key=e.key,i.DB=store.get(n.DB.DBNAME);var s=parseInt(i.DB.extralifes);return i.health=5+s,i.hitDelay=!1,i.hitCoin=!1,i.seconds=1,i.secondsLevel=600,i.extraPoints=0,i.key===n.Sprites.DanielaTroglo?(i.animIDLE=n.Anims.DanielaTroglo.IDLE,i.animDOWN=n.Anims.DanielaTroglo.DOWN,i.animWALK=n.Anims.DanielaTroglo.WALK,i.animCLIMB=n.Anims.DanielaTroglo.CLIMB):(i.animIDLE=n.Anims.Daniela.IDLE,i.animDOWN=n.Anims.Daniela.DOWN,i.animWALK=n.Anims.Daniela.WALK),e.scene.physics.world.enable(f(f(i))),e.scene.add.existing(f(f(i))),i.bounce=.5,i.acceleration=300,i.body.maxVelocity.x=150,i.body.maxVelocity.y=500,i.body.setCollideWorldBounds(!0),i.jumpForce=350,i.jumpTimer=0,i.jumping=!1,i.deceleration=2,i.friction=10,i.anims.play(i.animIDLE),i.prevAnim="idle",i.key!==n.Sprites.DanielaTroglo?(i.body.setSize(20,30),i.body.setOffset(6,2)):i.body.setSize(20,40),i.setDepth(3),i.isInLiana=!1,i.animControl={left:!1,right:!1,jump:!1,down:!1},i.cursor=i.scene.input.keyboard.createCursorKeys(),i.gamepad=null,i.scene.input.gamepad.once("down",function(e){i.gamepad=e}),i.soundJump=i.scene.sound.add(n.Sound.SOUNDS.DANIELA_JUMP),i.soundDanielaAuch=i.scene.sound.add(n.Sound.SOUNDS.DANIELA_AUCH),i.coinpickup=i.scene.sound.add(n.Sound.BONUSLEVEL.COINPICKUP),i.lolo=null,i}var i,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&p(e,t)}(t,Phaser.GameObjects.Sprite),i=t,(o=[{key:"followedBy",value:function(e){this.lolo=e}},{key:"update",value:function(e,t){this.seconds!=parseInt(Math.abs(e/1e3))&&(this.seconds=parseInt(Math.abs(e/1e3)),this.secondsLevel--),this.lolo&&(this.flipX?(this.lolo.flipX=!0,this.lolo.x+=.1*(this.x-this.lolo.x)-5):(this.lolo.flipX=!1,this.lolo.x+=.1*(this.x-this.lolo.x)+5),this.lolo.y+=.1*(this.y-this.lolo.y)-5);var i=this.cursor.left.isDown||this.animControl.left||null!==this.gamepad&&this.gamepad.left,o=this.cursor.right.isDown||this.animControl.right||null!==this.gamepad&&this.gamepad.right,s=this.cursor.up.isDown||this.animControl.jump||null!==this.gamepad&&this.gamepad.A,a=this.cursor.down.isDown||this.animControl.down||null!==this.gamepad&&this.gamepad.down;this.jumpTimer-=t,this.isInLiana?(this.animation(n.Anims.Direction.CLIMB,this.animCLIMB),s&&i?(this.x-=20,this.body.setAllowGravity(!0),this.body.setVelocityY(-this.jumpForce),this.jumping=!0,this.body.velocity.x=-200,this.isInLiana=!1):s&&o&&(this.x+=20,this.body.setAllowGravity(!0),this.body.setVelocityY(-this.jumpForce),this.jumpTimer=300,this.jumping=!0,this.body.velocity.x=200,this.isInLiana=!1),s&&(this.body.velocity.y=-50),a&&(this.body.velocity.y=50)):a?(this.animation(n.Anims.Direction.DOWN,this.animDOWN),!this.jumping||this.body.blocked.down?this.run((0<this.body.velocity.x?-1:1)*this.acceleration+this.deceleration):this.run(0)):(i?this.moverLeftRight(n.Anims.Direction.LEFT):o?this.moverLeftRight(n.Anims.Direction.RIGHT):this.body.blocked.down?(5<this.body.velocity.x&&!this.jumping?this.animation(n.Anims.Direction.RIGHT,this.animWALK):this.body.velocity.x<-5&&!this.jumping&&this.animation(n.Anims.Direction.LEFT,this.animWALKK),Math.abs(this.body.velocity.x)<10?(this.animation(n.Anims.Direction.IDLE,this.animIDLE),this.body.setVelocityX(0),this.run(0)):this.run((0<this.body.velocity.x?-1:1)*this.acceleration+this.deceleration)):this.body.blocked.down||this.run(0),s&&(!this.jumping||0<this.jumpTimer)?this.jump():s||(this.jumpTimer=-1,this.body.blocked.down&&(this.jumping=!1)))}},{key:"moverLeftRight",value:function(e){var t=(e===n.Anims.Direction.RIGHT?1:-1)*this.acceleration;0===this.body.velocity.y?(100<Math.abs(this.body.velocity.x)?this.run(t*this.deceleration*this.friction):this.run(t),this.animation(e,this.animWALK)):this.run(t),this.flipX=e===n.Anims.Direction.RIGHT,this.lolo&&(this.lolo.flipX=this.flipX)}},{key:"jump",value:function(){(this.body.blocked.down||this.jumping)&&((this.body.velocity.y<0||this.body.blocked.down)&&this.body.setVelocityY(-this.jumpForce),this.jumping||(this.jumpTimer=300),this.jumping=!0,this.animation(n.Anims.Direction.JUMP,this.animIDLE))}},{key:"run",value:function(e){this.body.setAccelerationX(e)}},{key:"animation",value:function(e,t){e===n.Anims.Direction.DOWN?this.key!==n.Sprites.DanielaTroglo?(this.body.setSize(20,20),this.body.setOffset(6,12)):(this.body.setSize(20,25),this.body.setOffset(0,15)):this.key!==n.Sprites.DanielaTroglo?(this.body.setSize(20,30),this.body.setOffset(6,2)):this.body.setSize(20,40),this.prevAnimJump!==e&&(this.anims.play(t),e===n.Anims.Direction.JUMP&&this.soundJump.play()),this.prevAnimJump=e}},{key:"loseHealth",value:function(){if(5<this.health){this.DB=store.get(n.DB.DBNAME);var e=parseInt(this.DB.extralifes);this.DB.extralifes=e-1,store.set(n.DB.DBNAME,this.DB)}this.health--,this.scene.textHealth.setText(this.scene.TG.tr("COMMONTEXT.LIVES")+this.health),0===this.health&&(this.gameOver=!0,this.emit(n.Events.GAME_OVER))}},{key:"enemyCollision",value:function(){var e=this;this.hitDelay||(this.loseHealth(),this.hitDelay=!0,this.tint=16750848,this.soundDanielaAuch.play(),this.scene&&this.scene.time.addEvent({delay:600,callback:function(){e.hitDelay=!1,e.tint=16777215},callbackScope:this}))}},{key:"waterCollision",value:function(){console.warn("Estoy en el agua :D")}},{key:"nextScene",value:function(){this.scene.textDialog.setText(this.scene.TG.tr("COMMONTEXT.WEDIDIT")),this.emit(n.Events.LEVEL_FINISHED)}},{key:"collectExtraPoints",value:function(e,t){var i=this;this.hitCoin||(this.extraPoints++,this.coinpickup.play(),this.hitCoin=!0,this.scene.tweens.add({targets:t,y:t.y-100,alpha:0,duration:800,ease:"Cubic.easeOut",callbackScope:this,onComplete:function(){e.killAndHide(t),e.remove(t),t.destroy()}}),this.scene.time.addEvent({delay:100,callback:function(){i.hitCoin=!1}}))}}])&&h(i.prototype,o),t}();function m(e){return(m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function b(e){return(b=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function g(e,t){return(g=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function v(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var E=function(e){function t(e){var i,o;return function(e,i){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this),this,i=!(o=b(t).call(this,e.scene,e.x,e.y,e.key))||"object"!==m(o)&&"function"!=typeof o?v(this):o,e.scene.physics.world.enable(v(v(i))),e.scene.add.existing(v(v(i))),i.body.setCollideWorldBounds(!0),i.anims.play(n.Anims.LOLO.NORMAL_FLY),i.body.setSize(20,30),i.setDepth(3),i.body.setAllowGravity(!1),i.flipX=!0,i}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&g(e,t)}(t,Phaser.GameObjects.Sprite),t}();function L(e){return(L="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function O(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function S(e){return(S=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _(e,t){return(_=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var T=function(e){function t(e,i,n,o){var s;return function(e,i){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this),(s=function(e,t){return!t||"object"!==L(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}(this,S(t).call(this,e,i,n))).createBats(i,o),s.startBat(),s}var i,n;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_(e,t)}(t,Phaser.Physics.Arcade.Group),i=t,(n=[{key:"createBats",value:function(e,t){var i=this;t.map(function(e){i.add(e)})}},{key:"startBat",value:function(){var e=this;this.children.iterate(function(t){t.body.setAllowGravity(!1),t.body.setSize(16,16),t.setScale(1.25),t.setDepth(1),t.body.setCollideWorldBounds(!0),e.move(Phaser.Math.Between(0,1)?"left":"right",t)})}},{key:"update",value:function(){var e=this;this.children.iterate(function(t){0===t.body.velocity.x&&e.move(Phaser.Math.Between(0,1)?"left":"right",t),t.body.blocked.right?e.move("left",t):t.body.blocked.left&&e.move("right",t)})}},{key:"move",value:function(e,t){"right"===e?(t.body.setVelocityX(100),t.flipX=!1):"left"===e&&(t.body.setVelocityX(-100),t.flipX=!0)}}])&&O(i.prototype,n),t}();function w(e){return(w="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function D(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function B(e){return(B=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function A(e,t){return(A=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var x=function(e){function t(e,i,n,o,s){var a;return function(e,i){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this),(a=function(e,t){return!t||"object"!==w(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}(this,B(t).call(this,e,i,n))).speed=s,a.createWheels(i,o),a.startWheel(),a}var i,n;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&A(e,t)}(t,Phaser.Physics.Arcade.Group),i=t,(n=[{key:"createWheels",value:function(e,t){var i=this;t.map(function(e){i.add(e)})}},{key:"startWheel",value:function(){var e=this;this.children.iterate(function(t){t.body.setCollideWorldBounds(!0),t.setDepth(1),e.move(Phaser.Math.Between(0,1)?"left":"right",t)})}},{key:"update",value:function(){var e=this;this.children.iterate(function(t){0===t.body.velocity.x&&e.move(Phaser.Math.Between(0,1)?"left":"right",t),t.body.blocked.right?(e.move("left",t),t.flipX=!1):t.body.blocked.left&&(e.move("right",t),t.flipX=!0)})}},{key:"move",value:function(e,t){"right"===e?t.body.setVelocityX(this.speed):"left"===e&&t.body.setVelocityX(-1*this.speed)}}])&&D(i.prototype,n),t}();function k(e){return(k="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function j(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function C(e){return(C=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function I(e,t){return(I=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var P=function(e){function t(e,i,n,o){var s;return function(e,i){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this),(s=function(e,t){return!t||"object"!==k(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}(this,C(t).call(this,e,i,n))).createExtraPoints(i,o),s.startExtraPoints(),s}var i,n;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&I(e,t)}(t,Phaser.Physics.Arcade.Group),i=t,(n=[{key:"createExtraPoints",value:function(e,t){var i=this;t.map(function(e){i.add(e)})}},{key:"startExtraPoints",value:function(){this.children.iterate(function(e){e.body.setAllowGravity(!1),e.body.setSize(16,16),e.setScale(1),e.setDepth(1)})}}])&&j(i.prototype,n),t}();function N(e){return(N="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function G(e){return(G=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function M(e,t){return(M=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var V=function(e){function t(e,i,n,o,s,a){var r=6<arguments.length&&void 0!==arguments[6]?arguments[6]:null,l=7<arguments.length&&void 0!==arguments[7]?arguments[7]:null;return function(e,i){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this),function(e,t){return!t||"object"!==N(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}(this,G(t).call(this,e,i+16*o/32,n+16*s/32,o,s,r,l))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&M(e,t)}(t,Phaser.GameObjects.Rectangle),t}();function F(e){return(F="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function R(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function U(e){return(U=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Y(e,t){return(Y=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var J=function(e){function t(e){var i;return function(e,i){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this),(i=function(e,t){return!t||"object"!==F(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}(this,U(t).call(this,e))).key=e.key,i.map=null,i.bg=null,i.lolo=null,i.daniela=null,i.bats=[],i.bees=[],i.wheels=[],i.crocodiles=[],i.snails=[],i.sodas=[],i.donuts=[],i.enemyGroups={},i.extraPoints=[],i.extraPointsGroup,i.levelTiles=[],i.levelLayers=[],i.textHealth,i}var i,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Y(e,t)}(t,Phaser.Scene),i=t,(o=[{key:"preload",value:function(){console.log(this.key),this.scene.launch(n.Levels.UI,{scene:this.key})}},{key:"createDaniela",value:function(){var e=this,t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:n.Sprites.Daniela.KEY,i=!(1<arguments.length&&void 0!==arguments[1])||arguments[1],o=!(2<arguments.length&&void 0!==arguments[2])||arguments[2],s=!(3<arguments.length&&void 0!==arguments[3])||arguments[3];this.DB=store.get(n.DB.DBNAME),this.DB.currentLevel=this.key,store.set(n.DB.DBNAME,this.DB),o&&this.createMap(),this.map.findObject(n.Sprites.Daniela.KEY,function(o){if(o.type===n.Sprites.Daniela.KEY)return e.daniela=new y({scene:e,x:o.x,y:o.y,key:t}).setScale(2),e.daniela.on(n.Events.GAME_OVER,function(){e.changeScene(e.daniela.scene,n.Levels.MENU,2e3)}),e.daniela.on(n.Events.LEVEL_FINISHED,function(){e.showScores()}),e.registry.events.on(n.Events.MENU,function(){e.changeScene(e.daniela.scene,n.Levels.MENU,0)}),e.registry.events.on("controlLeftON",function(){e.daniela.animControl.left=!0}),e.registry.events.on("controlLeftOFF",function(){e.daniela.animControl.left=!1}),e.registry.events.on("controlRightON",function(){e.daniela.animControl.right=!0}),e.registry.events.on("controlRightOFF",function(){e.daniela.animControl.right=!1}),e.registry.events.on("controlJumpON",function(){e.daniela.animControl.jump=!0}),e.registry.events.on("controlJumpOFF",function(){e.daniela.animControl.jump=!1}),e.registry.events.on("controlDownON",function(){e.daniela.animControl.down=!0}),e.registry.events.on("controlDownOFF",function(){e.daniela.animControl.down=!1}),i&&e.createLoloNormal(e.daniela),e.daniela;console.error("No se ha encontrado a daniela en el tilemap")}),s&&(this.cameras.main.setBounds(0,0,this.map.widthInPixels,this.map.heightInPixels),this.cameras.main.startFollow(this.daniela))}},{key:"createLoloNormal",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:this.daniela;return this.lolo=new E({scene:this,x:e.x-50,y:e.y-50,key:n.Sprites.Lolo_Normal.KEY}).setScale(1),this.daniela.followedBy(this.lolo),this.lolo}},{key:"createMap",value:function(){return this.map=this.make.tilemap({key:this.key}),this.physics.world.bounds.setTo(0,0,this.map.widthInPixels,this.map.heightInPixels),this.map}},{key:"createEnemies",value:function(e,t,i){return this.map.createFromObjects(e,t,{key:i})}},{key:"findAndLoadEnemiesFromMap",value:function(e){var t=this,i=!(1<arguments.length&&void 0!==arguments[1])||arguments[1];Object.keys(e).forEach(function(o){switch(e[o]){case n.Sprites.Bats.OBJECT_NAME:t.bats=t.createEnemies(n.Sprites.Bats.OBJECT_NAME,n.Sprites.Bats.OBJECT_ID,n.Sprites.Bats.KEY),t.enemyGroups.batsGroup=new T(t.physics.world,t,[],t.bats),t.anims.play(n.Anims.BATS,t.bats);break;case n.Sprites.Wheel.OBJECT_NAME:t.wheels=t.createEnemies(n.Sprites.Wheel.OBJECT_NAME,n.Sprites.Wheel.OBJECT_ID,n.Sprites.Wheel.KEY),t.enemyGroups.wheelsGroup=new x(t.physics.world,t,[],t.wheels,100),t.anims.play(n.Anims.WHEEL,t.wheels);break;case n.Sprites.Bees.OBJECT_NAME:t.bees=t.createEnemies(n.Sprites.Bees.OBJECT_NAME,n.Sprites.Bees.OBJECT_ID,n.Sprites.Bees.KEY),t.enemyGroups.beesGroup=new T(t.physics.world,t,[],t.bees),t.enemyGroups.beesGroup.children.iterate(function(e){return e.setScale(1)}),t.anims.play(n.Anims.BEES,t.bees);break;case n.Sprites.Snails.OBJECT_NAME:t.snails=t.createEnemies(n.Sprites.Snails.OBJECT_NAME,n.Sprites.Snails.OBJECT_ID,n.Sprites.Snails.KEY),t.enemyGroups.snailsGroup=new x(t.physics.world,t,[],t.snails,100),t.enemyGroups.snailsGroup.children.iterate(function(e){return e.setScale(1)}),t.anims.play(n.Anims.SNAILS,t.snails);break;case n.Sprites.Soda.OBJECT_NAME:t.sodas=t.createEnemies(n.Sprites.Soda.OBJECT_NAME,n.Sprites.Soda.OBJECT_ID,n.Sprites.Soda.KEY),t.enemyGroups.sodasGroup=new T(t.physics.world,t,[],t.sodas),t.enemyGroups.sodasGroup.children.iterate(function(e){return e.setScale(1)}),t.anims.play(n.Anims.SODAS,t.sodas);break;case n.Sprites.Donut.OBJECT_NAME:t.donuts=t.createEnemies(n.Sprites.Donut.OBJECT_NAME,n.Sprites.Donut.OBJECT_ID,n.Sprites.Donut.KEY),t.enemyGroups.donutsGroup=new x(t.physics.world,t,[],t.donuts,75),t.enemyGroups.donutsGroup.children.iterate(function(e){return e.setScale(1)}),t.anims.play(n.Anims.DONUT,t.donuts);break;case n.Sprites.Crocodile.OBJECT_NAME:t.crocodiles=t.createEnemies(n.Sprites.Crocodile.OBJECT_NAME,n.Sprites.Crocodile.OBJECT_ID,n.Sprites.Crocodile.KEY),t.enemyGroups.crocodilesGroup=new T(t.physics.world,t,[],t.crocodiles),t.enemyGroups.crocodilesGroup.children.iterate(function(e){e.setScale(1),e.body.setSize(90,16)}),t.anims.play(n.Anims.CROCODILE,t.crocodiles);break;case n.Sprites.Dinowater.OBJECT_NAME:t.dinowaters=t.createEnemies(n.Sprites.Dinowater.OBJECT_NAME,n.Sprites.Dinowater.OBJECT_ID,n.Sprites.Dinowater.KEY),t.enemyGroups.dinowatersGroup=new x(t.physics.world,t,[],t.dinowaters,40),t.anims.play(n.Anims.DINOWATER,t.dinowaters);break;case n.Sprites.Dinobird.OBJECT_NAME:t.dinobirds=t.createEnemies(n.Sprites.Dinobird.OBJECT_NAME,n.Sprites.Dinobird.OBJECT_ID,n.Sprites.Dinobird.KEY),t.enemyGroups.dinobirds=new T(t.physics.world,t,[],t.dinobirds),t.anims.play(n.Anims.DINOBIRD,t.dinobirds);break;default:console.warn("La capa de enemigos "+e[o]+" no se en cuentra entre los disponibles. Añádela al switch para poder usarla.")}i&&Object.keys(t.enemyGroups).forEach(function(e){t.physics.add.overlap(t.daniela,t.enemyGroups[e],function(){t.daniela.enemyCollision()})})}),console.log("Se han creado los siguientes grupos de enemigos:"),console.log(this.enemyGroups)}},{key:"findTransparentObjects",value:function(e,t){var i=this,n=2<arguments.length&&void 0!==arguments[2]&&arguments[2],o=3<arguments.length&&void 0!==arguments[3]&&arguments[3],s=this.physics.add.staticGroup();return this.map.findObject(e,function(e){e.name===t&&s.add(new V(i,e.x,e.y,e.width,e.height,e.type))}),n&&this.physics.add.overlap(this.daniela,s,function(){i.daniela.enemyCollision()}),o&&Object.keys(this.enemyGroups).forEach(function(e){i.physics.add.collider(s,i.enemyGroups[e])}),s}},{key:"createCoins",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:n.Sprites.ExtraPoint.KEY;this.extraPoints=this.createEnemies(n.Sprites.ExtraPoint.OBJECT_NAME,n.Sprites.ExtraPoint.OBJECT_ID,e),this.extraPointsGroup=new P(this.physics.world,this,[],this.extraPoints),this.anims.play(n.Anims.EXTRAPOINT,this.extraPoints),this.physics.add.overlap(this.daniela,this.extraPointsGroup,function(e,t){this.daniela.collectExtraPoints(this.extraPointsGroup,t)},null,this)}},{key:"createBackground",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,i=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0,n=3<arguments.length&&void 0!==arguments[3]?arguments[3]:2560,o=4<arguments.length&&void 0!==arguments[4]?arguments[4]:1400,s=5<arguments.length&&void 0!==arguments[5]?arguments[5]:{x:0,y:0},a=6<arguments.length&&void 0!==arguments[6]?arguments[6]:{x:0,y:0};this.bg=this.add.tileSprite(t,i,n,o,e).setOrigin(a.x,a.y).setScale(s.x,s.y)}},{key:"createRepeatedBackground",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,i=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0,n=3<arguments.length&&void 0!==arguments[3]?arguments[3]:{x:1,y:1},o=4<arguments.length&&void 0!==arguments[4]?arguments[4]:{x:0,y:0};this.bg=this.add.tileSprite(t,i,this.map.widthInPixels,this.map.heightInPixels,e).setOrigin(o.x,o.y).setScale(n.x,n.y)}},{key:"paintLayerAndCreateCollision",value:function(e){var t=this,i=1<arguments.length&&void 0!==arguments[1]?arguments[1]:n.Layers.WORLD,o=!(2<arguments.length&&void 0!==arguments[2])||arguments[2];this.levelTiles[this.levelTiles.length]=this.map.addTilesetImage(e);var s=this.levelTiles[this.levelTiles.length-1];this.levelLayers[this.levelLayers.length]=this.map.createDynamicLayer(i,s,0,0);var a=this.levelLayers[this.levelLayers.length-1];return a.setCollisionByExclusion([-1]),o&&(this.physics.add.collider(this.daniela,a),Object.keys(this.enemyGroups).forEach(function(e){t.physics.add.collider(t.enemyGroups[e],a)})),a}},{key:"createHealthText",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:20,t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:20,i=2<arguments.length&&void 0!==arguments[2]?arguments[2]:"pixel",n=3<arguments.length&&void 0!==arguments[3]?arguments[3]:"COMMONTEXT.LIVES",o=4<arguments.length&&void 0!==arguments[4]?arguments[4]:0,s=5<arguments.length&&void 0!==arguments[5]?arguments[5]:3;this.textHealth=this.add.dynamicBitmapText(e,t,i,this.TG.tr(n)),this.textHealth.setScrollFactor(o),this.textHealth.setDepth(s),this.textHealth.setText(this.TG.tr(n)+this.daniela.health)}},{key:"reboot",value:function(e){e.sound.stopAll(),e.scene.restart()}},{key:"changeScene",value:function(e,t,i){var o=this;e&&(this.levelTiles=[],e.physics.pause(),this.time.addEvent({delay:i,callback:function(){o.scene.get("UI")&&o.scene.get("UI").scene.stop(),e.cameras.main.fade(700,0,0,0),e.cameras.main.on("camerafadeoutcomplete",function(){console.log(t!=n.Levels.LEVELSELECT&&t!=n.Levels.SCORES&&t!=n.Levels.SETTINGSLEVEL&&t!=n.Levels.CREDITS&&t==n.Levels.MENU&&e.key!=n.Levels.LEVELSELECT&&e.key!=n.Levels.SCORES&&e.key!=n.Levels.SETTINGSLEVEL&&e.key!=n.Levels.CREDITS),(t!=n.Levels.LEVELSELECT&&t!=n.Levels.SCORES&&t!=n.Levels.SETTINGSLEVEL&&t!=n.Levels.CREDITS&&t==n.Levels.MENU&&e.key!=n.Levels.LEVELSELECT&&e.key!=n.Levels.SCORES&&e.key!=n.Levels.SETTINGSLEVEL&&e.key!=n.Levels.CREDITS||e.key==n.Levels.LEVELSELECT&&t!=n.Levels.MENU||t==n.Levels.INTROSTORY)&&e.sound.stopAll(),e.scene.stop(),e.scene.start(t,{from:e.key})})},callbackScope:this}))}},{key:"addEventForMusic",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]&&arguments[1],i=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0;this.DB=store.get(n.DB.DBNAME),this.DB.sound&&this.time.addEvent({delay:i,callback:function(){e.play(),e.setLoop(t)},callbackScope:this})}},{key:"createLianas",value:function(){return this.map.createFromObjects(n.Sprites.Lianas.OBJECT_NAME,n.Sprites.Lianas.OBJECT_ID,{key:n.Sprites.Lianas.KEY})}},{key:"createEndOfLianas",value:function(){return this.map.createFromObjects(n.Sprites.EndOfLianas.OBJECT_NAME,n.Sprites.EndOfLianas.OBJECT_ID,{key:n.Sprites.EndOfLianas.KEY})}},{key:"createEndLevelObject",value:function(e){return this.map.createFromObjects(n.Sprites.EndLevel.OBJECT_NAME,n.Sprites.EndLevel.OBJECT_ID,{key:e})}},{key:"showScores",value:function(){var e=this;this.daniela.scene.physics.pause(),this.height=this.cameras.main.height,this.width=this.cameras.main.width;var t=Phaser.Utils.String.Pad(parseInt(this.daniela.secondsLevel*this.daniela.health)+this.daniela.extraPoints,6,"0",1),i=0;3===this.daniela.health&&i++,30<=this.daniela.extraPoints&&i++,480<=this.daniela.secondsLevel&&i++,this.DB=store.get(n.DB.DBNAME),this.DB.currentLevel=this.key,t>this.DB.worlds[this.key].score&&(this.DB.worlds[this.key].score=t),i>this.DB.worlds[this.key].stars&&(this.DB.worlds[this.key].stars=i),this.DB.worlds[this.key].completed=!0,store.set(n.DB.DBNAME,this.DB),this.daniela.scene.add.dynamicBitmapText(this.width/2-100,this.height/2-150,"pixel","SCORE:"+t,24).setScrollFactor(0).setDepth(10).setTint(16776960),this.LevelUpmusic=this.sound.add(n.Sound.SOUNDS.LEVELUP),this.LevelUpmusic.play();for(var o=1;o<=3;o++){var s=this.add.image(this.width/2-300,this.height+100,n.Sprites.Star.KEY).setScrollFactor(0).setDepth(10).setOrigin(0).setAlpha(o<=i?1:.3);this.tweens.add({targets:s,x:200*o,y:"-= "+(this.height/2+200),duration:500,ease:"Power3"})}var a=this.daniela.scene.add.dynamicBitmapText(this.width/2-100,this.height-200,"pixel","MENU",24).setScrollFactor(0).setDepth(10).setTint(16776960);a.setInteractive(),a.on("pointerdown",function(){e.changeScene(e.daniela.scene,n.Levels.MENU,0)});var r=this.daniela.scene.add.dynamicBitmapText(this.width/2+100,this.height-200,"pixel","NEXT",24).setScrollFactor(0).setDepth(10).setTint(16776960);r.setInteractive(),r.on("pointerdown",function(){e.changeScene(e.daniela.scene,e.daniela.scene.target,500)})}},{key:"playMenuScenesBSO",value:function(){this.bgmusic=this.sound.add(n.Sound.MAIN.BSO),this.addEventForMusic(this.bgmusic,!0,200),this.birdMusic=this.sound.add(n.Sound.SOUNDS.BIRD_SINGING),this.addEventForMusic(this.birdMusic,!0,200)}}])&&R(i.prototype,o),t}();function K(e){return(K="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function W(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function H(e){return(H=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function z(e,t){return(z=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var X=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){return!t||"object"!==K(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}(this,H(t).call(this,{key:"Menu"}))}var i,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&z(e,t)}(t,J),i=t,(o=[{key:"init",value:function(e){e&&(this.levelFrom=e.from)}},{key:"preload",value:function(){}},{key:"create",value:function(){var e=this.cameras.main.width,t=e/2,i=this.cameras.main.height/2-50;this.bg1=this.add.image(0,0,n.Textures.BG_LEVEL2).setOrigin(0).setScale(1),this.bg=this.add.image(t,i,n.Textures.BG_MENU).setScale(.25),this.levelFrom!=n.Levels.CREDITS&&this.levelFrom!=n.Levels.LEVELSELECT&&this.levelFrom!=n.Levels.SCORES&&this.levelFrom!=n.Levels.SETTINGSLEVEL&&this.playMenuScenesBSO(),this.settingsButton=this.add.dynamicBitmapText(e,50,"pixel",this.TG.tr("MENU.SETTINGS")).setTint(8422537).setInteractive(),this.settingsButton.setPosition(e-this.settingsButton.width-50,50),this.changeSceneFromButton(this.settingsButton,n.Levels.SETTINGSLEVEL);var o=this.add.dynamicBitmapText(80,2*i,"pixel",this.TG.tr("MENU.PLAY"),24);o.setInteractive(),this.changeSceneFromButton(o,n.Levels.LEVELSELECT);var s=this.add.dynamicBitmapText(220,2*i,"pixel",this.TG.tr("MENU.INTRO"),24);s.setInteractive(),this.changeSceneFromButton(s,n.Levels.INTROSTORY);var a=this.add.dynamicBitmapText(400,2*i,"pixel",this.TG.tr("MENU.SCORES"),24);a.setInteractive(),this.changeSceneFromButton(a,n.Levels.SCORES);var r=this.add.dynamicBitmapText(600,2*i,"pixel",this.TG.tr("MENU.CREDITS"),24);r.setInteractive(),this.changeSceneFromButton(r,n.Levels.CREDITS);var l=[o,s,a,r],c=e;l.forEach(function(e){c-=e.width});for(var u=c/(l.length+1),h=0;h<l.length;h++){for(var d=u*(h+1),p=0;p<h;p++)d+=l[p].width;l[h].setPosition(d,l[h].y)}}},{key:"update",value:function(e,t){}},{key:"changeSceneFromButton",value:function(e,t){var i=this;e.on("pointerdown",function(){i.changeScene(i,t,0)})}}])&&W(i.prototype,o),t}(),Z={createDB:function(e){return e.map(function(e){return null===store.get(e.key)?store.set(e.key,e.value):void 0})},DB:{daniela:{costume:"daniela"},currentLevel:"Level1",maxLevel:"Level1",extralifes:0,sound:!0,worlds:{Level1:{completed:!1,score:"000000",stars:0},Level2:{completed:!1,score:"000000",stars:0},Level3:{completed:!1,score:"000000",stars:0},Level4:{completed:!1,score:"000000",stars:0},Level5:{completed:!1,score:"000000",stars:0},Level6:{completed:!1,score:"000000",stars:0}},skipIntro:!0}};function q(e){return(q="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Q(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function $(e){return($=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ee(e,t){return(ee=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var te=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){return!t||"object"!==q(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}(this,$(t).call(this,{key:"SettingsLevel"}))}var i,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ee(e,t)}(t,J),i=t,(o=[{key:"preload",value:function(){this.muted=!1}},{key:"create",value:function(){var e=this,t=(this.cameras.main.width,this.cameras.main.height/2-50);this.bg1=this.add.image(0,0,n.Textures.BG_LEVEL2).setOrigin(0).setScale(1);var i=this.add.dynamicBitmapText(80,2*t,"pixel",this.TG.tr("LEVELSELECT.MENU"),24);i.setInteractive(),i.on("pointerdown",function(){e.changeScene(e,n.Levels.MENU,0)}),this.languageLabel=this.add.dynamicBitmapText(80,150,"pixel",this.TG.tr("SETTINGLEVEL.LANGUAGE"),24).setTint(8422537),this.currentLanguage=this.TG.getActualLang(),this.flag1=this.add.image(80,200,n.Settings.FLAG_EN).setOrigin(0).setScale(2).setDepth(1),this.setFlagsSetting(this.flag1,"en"),this.flag2=this.add.image(130,200,n.Settings.FLAG_ES).setOrigin(0).setScale(2).setDepth(1),this.setFlagsSetting(this.flag2,"es"),this.flag3=this.add.image(180,200,n.Settings.FLAG_IT).setOrigin(0).setScale(2).setDepth(1),this.setFlagsSetting(this.flag3,"it"),this.flag4=this.add.image(230,200,n.Settings.FLAG_DE).setOrigin(0).setScale(2).setDepth(1),this.setFlagsSetting(this.flag4,"de"),this.resetDBLabel=this.add.dynamicBitmapText(80,250,"pixel",this.TG.tr("SETTINGLEVEL.RESET"),24).setTint(8422537),this.resetDBLabel.setInteractive(),this.resetDBLabel.on("pointerdown",function(){store.clearAll(),Z.createDB([{key:n.DB.DBNAME,value:Z.DB}]),e.DoneLabel=e.add.dynamicBitmapText(80,300,"pixel",e.TG.tr("SETTINGLEVEL.DONE"),24).setTint(8422537),store.each(function(e,t){console.log(e,"->",t)})}),this.soundLabeltxt=this.add.dynamicBitmapText(80,50,"pixel",this.TG.tr("SETTINGLEVEL.SOUND"),24).setTint(8422537),this.DB=store.get(n.DB.DBNAME),this.soundLabel=this.DB.sound?n.UI.VOLUMEON:n.UI.VOLUMEOFF,this.musicOnOffButton=this.add.image(100,90,this.soundLabel).setScale(.5).setTint(255),this.musicOnOffButton.setInteractive(),this.musicOnOffButton.on("pointerdown",function(){e.DB.sound=!e.DB.sound,store.set(n.DB.DBNAME,e.DB),e.DB.sound?e.playMenuScenesBSO():e.sound.stopAll(),e.soundLabel=e.DB.sound?n.UI.VOLUMEON:n.UI.VOLUMEOFF,e.musicOnOffButton.setTexture(e.soundLabel)})}},{key:"update",value:function(e,t){}},{key:"setFlagsSetting",value:function(e,t){var i=this;e.setInteractive(),e.on("pointerdown",function(){i.TG.setLang(t),i.scene.launch("AudioLoader"),i.changeScene(i,n.Levels.MENU,0)}),this.currentLanguage===t&&this.add.rectangle(e.x-3,e.y-3,e.width+3,e.height+3,16711680).setOrigin(0).setScale(2).setDepth(0)}}])&&Q(i.prototype,o),t}();function ie(e){return(ie="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ne(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function oe(e){return(oe=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function se(e,t){return(se=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var ae=function(e){function t(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(e=function(e,t){return!t||"object"!==ie(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}(this,oe(t).call(this,{key:n.Levels.BONUSLEVEL}))).target=n.Levels.MENU,e}var i,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&se(e,t)}(t,J),i=t,(o=[{key:"create",value:function(){this.score=10,this.countDown=60,this.newTime=1,this.enemyIndex=0,this.puzzlepiece_count=1,this.height=this.cameras.main.height,this.width=this.cameras.main.width,this.bgparallax=[];for(var e=5;1<=e;e--)this.bgparallax[e]=this.add.tileSprite(0,0,this.width,this.height,"bonus_plx_"+e).setOrigin(0).setScale(2.23);this.coinGroup=this.add.group({removeCallback:function(e){try{e.scene.coinPool.add(e)}catch(e){console.log("no coin")}}}),this.coinPool=this.add.group({removeCallback:function(e){try{e.scene.coinGroup.add(e)}catch(e){console.log("no coin")}}}),this.enemyGroup=this.add.group({removeCallback:function(e){try{e.scene.enemyPool.add(e)}catch(e){console.log("no enemy")}}}),this.enemyPool=this.add.group({removeCallback:function(e){try{e.scene.enemyGroup.add(e)}catch(e){console.log("no enemy")}}}),this.textDialog=this.add.dynamicBitmapText(30,this.height-50,"pixel",this.TG.tr("BONUSLEVEL.INSTRUCTIONS")),this.textDialog.setScrollFactor(0),this.textDialog.setDepth(3),this.textDialog.setAlpha(1),this.pain=this.sound.add(n.Sound.BONUSLEVEL.LOLO_AUCH),this.coinpickup=this.sound.add(n.Sound.BONUSLEVEL.COINPICKUP),this.sound_LevelAll_LOLO_RecoverOnleLife_16=this.sound.add(this.TG.getActualLang()+"_"+n.Sound.LEVELALL.RECOVERONELIFE),this.addEventForMusic(this.sound_LevelAll_LOLO_RecoverOnleLife_16),this.music=this.sound.add(n.Sound.BONUSLEVEL.BSO),this.addEventForMusic(this.music,!0,5e3),this.anims.create({key:"fly",frames:this.anims.generateFrameNumbers("lolo_intro",{start:0,end:5}),frameRate:8,repeat:-1}),this.anims.create({key:"hit",frames:this.anims.generateFrameNumbers("lolo_intro",{start:6,end:7}),frameRate:10,repeat:-1}),this.lolo=this.physics.add.sprite(180,240,"lolo_intro"),this.lolo.setDepth(2),this.lolo.flipX=!0,this.lolo.anims.play("fly"),this.lolo.hitDelay=!1,this.lolo.hitCoin=!1,this.lolo.health=3,this.lolo.setSize(40,40),this.textHealth=this.add.dynamicBitmapText(20,20,"pixel",this.TG.tr("COMMONTEXT.LIVES")),this.textHealth.setScrollFactor(0),this.textHealth.setDepth(3),this.textHealth.setText(this.TG.tr("COMMONTEXT.LIVES")+this.lolo.health),this.textCoin=this.add.dynamicBitmapText(20,50,"pixel",this.TG.tr("BONUSLEVEL.COINS")),this.textCoin.setScrollFactor(0),this.textCoin.setDepth(3),this.textCoin.setText(this.TG.tr("BONUSLEVEL.COINS")+" "+this.score),this.textTime=this.add.dynamicBitmapText(20,80,"pixel",this.TG.tr("BONUSLEVEL.TIME")),this.textTime.setScrollFactor(0),this.textTime.setDepth(3),this.textTime.setText(this.TG.tr("BONUSLEVEL.TIME")+" "+this.countDown),this.physics.add.overlap(this.lolo,this.enemyGroup,this.hitBird,null,this),this.physics.add.overlap(this.lolo,this.coinGroup,function(e,t){var i=this;this.lolo.hitCoin||(this.score--,this.coinpickup.play(),this.textCoin.setText(this.TG.tr("BONUSLEVEL.COINS")+" "+this.score),this.lolo.hitCoin=!0,this.tweens.add({targets:t,y:t.y-100,alpha:0,duration:300,ease:"Cubic.easeOut",callbackScope:this,onComplete:function(){this.coinGroup.killAndHide(t),this.coinGroup.remove(t)}}),this.time.addEvent({delay:500,callback:function(){i.lolo.hitCoin=!1}}),0==this.score&&this.win())},null,this),this.input.on("pointerdown",this.jump,this)}},{key:"jump",value:function(){this.lolo.setVelocityY(-200)}},{key:"update",value:function(e,t){this.newTime!=parseInt(Math.abs(e/1e3))&&(this.newTime=parseInt(Math.abs(e/1e3)),this.countDown--,this.textTime.setText(this.TG.tr("BONUSLEVEL.TIME")+" "+this.countDown),0==this.countDown&&this.gameOver(),this.addEnemy(),0==this.newTime%3&&this.addCoin());for(var i=1;i<=5;i++)this.bgparallax[i].tilePositionX+=.6-.1*i;this.lolo.y>this.sys.game.config.height&&(this.lolo.y=this.lolo.y-30,this.lolo.setVelocityY(0),this.hitBird()),this.lolo.y<10&&(this.lolo.y=this.lolo.y+30,this.lolo.setVelocityY(0),this.hitBird()),this.enemyGroup.getChildren().forEach(function(e){e.x<-e.displayWidth/2&&(this.enemyGroup.killAndHide(e),this.enemyGroup.remove(e))},this),this.coinGroup.getChildren().forEach(function(e){e.x<-e.displayWidth/2&&(this.coinGroup.killAndHide(e),this.coinGroup.remove(e))},this)}},{key:"gameOver",value:function(){this.music.stop(),this.changeScene(this,this.target)}},{key:"win",value:function(){this.physics.pause(),this.DB=store.get(n.DB.DBNAME);var e=parseInt(this.DB.extralifes);this.DB.extralifes=e+1,store.set(n.DB.DBNAME,this.DB);var t=this.add.dynamicBitmapText(this.width/2,this.height+100,"pixel",this.TG.tr("BONUSLEVEL.YOUWIN"),48).setTint(16776960);this.tweens.add({targets:t,x:this.width/2-250,y:this.height/2-150,duration:500,ease:"Power3"}),this.LevelUpmusic=this.sound.add(n.Sound.SOUNDS.LEVELUP),this.LevelUpmusic.play(),this.music.stop(),this.changeScene(this,this.target,2500)}},{key:"hitBird",value:function(){var e=this;this.lolo.hitDelay||(this.lolo.health--,this.pain.play(),0==this.lolo.health&&this.gameOver(),this.textHealth.setText(this.TG.tr("COMMONTEXT.LIVES")+this.lolo.health),this.lolo.hitDelay=!0,this.lolo.anims.play("hit"),this.time.addEvent({delay:1e3,callback:function(){e.lolo.anims.play("fly"),e.lolo.hitDelay=!1}}))}},{key:"addCoin",value:function(){var e,t=this.sys.game.config.width+100,i=Phaser.Math.Between(75,this.sys.game.config.height-75);this.coinPool.getLength()?((e=this.coinPool.getFirst()).createSibling=!1,e.x=t,e.y=i,e.alpha=1,e.active=!0,e.visible=!0,e.anims.play(n.Anims.PUZZLEPIECE+this.puzzlepiece_count,this.extraPoints),this.coinPool.remove(e)):((e=this.physics.add.sprite(t,i,n.Sprites.PUZZLEPIECE.KEY)).setScale(1.4),e.createSibling=!1,e.anims.play(n.Anims.PUZZLEPIECE+this.puzzlepiece_count,this.extraPoints),e.setVelocityX(-200),e.body.allowGravity=!1,e.alpha=1,this.coinGroup.add(e)),this.puzzlepiece_count++,4<this.puzzlepiece_count&&(this.puzzlepiece_count=1)}},{key:"addEnemy",value:function(){var e,t=[n.Sprites.Bees,n.Sprites.Dinobird,n.Sprites.Soda,n.Sprites.Bats],i=[n.Anims.BEES,n.Anims.DINOBIRD,n.Anims.SODAS,n.Anims.BATS],o=this.sys.game.config.width,s=Phaser.Math.Between(75,this.sys.game.config.height-75);this.enemyPool.getLength()?((e=this.enemyPool.getFirst()).createSibling=!1,e.x=o,e.y=s,e.active=!0,e.visible=!0,this.enemyPool.remove(e)):((e=this.physics.add.sprite(o,s,t[this.enemyIndex])).createSibling=!1,e.anims.play(i[this.enemyIndex]),e.flipX=!0,e.setVelocityX(-200),e.setScale([1,1.8,1,2][this.enemyIndex]),e.body.allowGravity=!1,this.enemyGroup.add(e)),this.enemyIndex++,3<this.enemyIndex&&(this.enemyIndex=0)}}])&&ne(i.prototype,o),t}();function re(e){return(re="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function le(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function ce(e){return(ce=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ue(e,t){return(ue=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var he=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){return!t||"object"!==re(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}(this,ce(t).call(this,{key:"LevelSelect"}))}var i,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ue(e,t)}(t,J),i=t,(o=[{key:"preload",value:function(){}},{key:"create",value:function(){var e=this,t=this.cameras.main.width,i=this.cameras.main.height/2-50;this.bg1=this.add.image(0,0,n.Textures.BG_LEVEL2).setOrigin(0).setScale(1),this.bonusButton=this.add.dynamicBitmapText(t-200,30,"pixel",this.TG.tr("LEVELSELECT.BONUS")).setTint(8422537).setInteractive(),this.bonusButton.setPosition(t-this.bonusButton.width-40,30),this.bonusButton.on("pointerdown",function(){e.changeScene(e,n.Levels.BONUSLEVEL,0)});var o=this.add.dynamicBitmapText(80,2*i,"pixel",this.TG.tr("LEVELSELECT.MENU"),24);o.setInteractive(),o.on("pointerdown",function(){e.changeScene(e,n.Levels.MENU,0)}),this.add.dynamicBitmapText(80,20,"pixel",this.TG.tr("LEVELSELECT.LEVELS"),24),this.DB=store.get(n.DB.DBNAME);var s=0;for(var a in this.DB.worlds){s++,this.levelButton=this.add.dynamicBitmapText(80,20+50*s,"pixel","Level "+s+": "+this.getLevelScore(s),24);for(var r=0;r<this.getNumberOfStars(s);r++)this.add.image(460+50*r,15+50*s,n.Sprites.Star.KEY).setScrollFactor(0).setDepth(10).setOrigin(0).setScale(.25).setAlpha(1);!1===this.DB.worlds[a].completed?(this.levelButton.setTint(16711680),"Level1"==a||!0===this.DB.worlds["Level"+(s-1)].completed?(this.changePlayScene(this.levelButton,s),this.playButton=this.add.image(600,20+50*s,n.Sprites.Play.KEY).setScrollFactor(0).setDepth(10).setOrigin(0).setScale(1.25).setAlpha(1),this.changePlayScene(this.playButton,s)):(this.changePlayScene(this.levelButton,s),this.levelButton.setTint(10395294),this.add.image(600,20+50*s,n.Sprites.Lock.KEY).setScrollFactor(0).setDepth(10).setOrigin(0).setScale(1).setAlpha(1))):!0===this.DB.worlds[a].completed&&this.DB.worlds[a].stars<3?(this.levelButton.setTint(16776960),this.changePlayScene(this.levelButton,s),this.playButton=this.add.image(600,20+50*s,n.Sprites.Play.KEY).setScrollFactor(0).setDepth(10).setOrigin(0).setScale(1.25).setAlpha(1),this.changePlayScene(this.playButton,s)):!0===this.DB.worlds[a].completed&&3===this.DB.worlds[a].stars&&(this.levelButton.setTint(32768),this.changePlayScene(this.levelButton,s),this.playButton=this.add.image(600,20+50*s,n.Sprites.Play2.KEY).setScrollFactor(0).setDepth(10).setOrigin(0).setScale(1.25).setAlpha(1),this.changePlayScene(this.playButton,s))}var l=this.add.dynamicBitmapText(80,20,"pixel",this.TG.tr("LEVELSELECT.LEVELNOTDONE")+": ",12).setTint(16711680);l.setPosition(t-l.width-30,400);var c=this.add.dynamicBitmapText(80,350,"pixel",this.TG.tr("LEVELSELECT.LEVELDONE")+": ",12).setTint(16776960);c.setPosition(t-c.width-30,425);var u=this.add.dynamicBitmapText(80,20,"pixel",this.TG.tr("LEVELSELECT.LEVELFINISHED")+": ",12).setTint(32768);u.setPosition(t-u.width-30,450)}},{key:"update",value:function(e,t){}},{key:"changePlayScene",value:function(e,t){var i=this;e.setInteractive(),e.on("pointerdown",function(){switch(t){case 1:i.changeScene(i,n.Levels.LEVEL1,0);break;case 2:i.changeScene(i,n.Levels.LEVEL2,0);break;case 3:i.changeScene(i,n.Levels.LEVEL3,0);break;case 4:i.changeScene(i,n.Levels.LEVEL4,0);break;case 5:i.changeScene(i,n.Levels.LEVEL5,0);break;case 6:i.changeScene(i,n.Levels.LEVEL6,0)}})}},{key:"getLevelScore",value:function(e){switch(e){case 1:return this.DB.worlds.Level1.score;case 2:return this.DB.worlds.Level2.score;case 3:return this.DB.worlds.Level3.score;case 4:return this.DB.worlds.Level4.score;case 5:return this.DB.worlds.Level5.score;case 6:return this.DB.worlds.Level6.score}}},{key:"getNumberOfStars",value:function(e){switch(e){case 1:return this.DB.worlds.Level1.stars;case 2:return this.DB.worlds.Level2.stars;case 3:return this.DB.worlds.Level3.stars;case 4:return this.DB.worlds.Level4.stars;case 5:return this.DB.worlds.Level5.stars;case 6:return this.DB.worlds.Level6.stars}}}])&&le(i.prototype,o),t}();function de(e){return(de="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function pe(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function fe(e){return(fe=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ye(e,t){return(ye=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var me=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){return!t||"object"!==de(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}(this,fe(t).call(this,{key:"Scores"}))}var i,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ye(e,t)}(t,J),i=t,(o=[{key:"preload",value:function(){}},{key:"create",value:function(){var e=this,t=(this.cameras.main.width,this.cameras.main.height/2-50);this.bg1=this.add.image(0,0,n.Textures.BG_LEVEL2).setOrigin(0).setScale(1),this.DB=store.get(n.DB.DBNAME);var i=this.add.dynamicBitmapText(80,2*t+20,"pixel",this.TG.tr("LEVELSELECT.MENU"),24);i.setInteractive(),i.on("pointerdown",function(){e.changeScene(e,n.Levels.MENU,0)}),this.add.dynamicBitmapText(80,50,"pixel",this.TG.tr("MENU.SCORES"),24).setTint(8422537),this.add.dynamicBitmapText(80,100,"pixel",this.TG.tr("LEVELSELECT.LEVEL")+" 1 : "+this.DB.worlds.Level1.score,24).setTint(8422537);for(var o=0;o<this.DB.worlds.Level1.stars;o++)this.add.image(480+50*o,95,n.Sprites.Star.KEY).setScrollFactor(0).setDepth(10).setOrigin(0).setScale(.25).setAlpha(1);this.add.dynamicBitmapText(80,150,"pixel",this.TG.tr("LEVELSELECT.LEVEL")+" 2 : "+this.DB.worlds.Level2.score,24).setTint(8422537);for(var s=0;s<this.DB.worlds.Level2.stars;s++)this.add.image(480+50*s,145,n.Sprites.Star.KEY).setScrollFactor(0).setDepth(10).setOrigin(0).setScale(.25).setAlpha(1);this.add.dynamicBitmapText(80,200,"pixel",this.TG.tr("LEVELSELECT.LEVEL")+" 3 : "+this.DB.worlds.Level3.score,24).setTint(8422537);for(var a=0;a<this.DB.worlds.Level3.stars;a++)this.add.image(480+50*a,195,n.Sprites.Star.KEY).setScrollFactor(0).setDepth(10).setOrigin(0).setScale(.25).setAlpha(1);this.add.dynamicBitmapText(80,250,"pixel",this.TG.tr("LEVELSELECT.LEVEL")+" 4 : "+this.DB.worlds.Level4.score,24).setTint(8422537);for(var r=0;r<this.DB.worlds.Level4.stars;r++)this.add.image(480+50*r,245,n.Sprites.Star.KEY).setScrollFactor(0).setDepth(10).setOrigin(0).setScale(.25).setAlpha(1);this.add.dynamicBitmapText(80,300,"pixel",this.TG.tr("LEVELSELECT.LEVEL")+" 5 : "+this.DB.worlds.Level5.score,24).setTint(8422537);for(var l=0;l<this.DB.worlds.Level5.stars;l++)this.add.image(480+50*l,395,n.Sprites.Star.KEY).setScrollFactor(0).setDepth(10).setOrigin(0).setScale(.25).setAlpha(1);this.add.dynamicBitmapText(80,350,"pixel",this.TG.tr("LEVELSELECT.LEVEL")+" 6 : "+this.DB.worlds.Level6.score,24).setTint(8422537);for(var c=0;c<this.DB.worlds.Level6.stars;c++)this.add.image(480+50*c,345,n.Sprites.Star.KEY).setScrollFactor(0).setDepth(10).setOrigin(0).setScale(.25).setAlpha(1)}},{key:"update",value:function(e,t){}}])&&pe(i.prototype,o),t}();function be(e){return(be="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ge(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function ve(e){return(ve=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Ee(e,t){return(Ee=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Le=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){return!t||"object"!==be(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}(this,ve(t).call(this,{key:"Credits"}))}var i,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ee(e,t)}(t,J),i=t,(o=[{key:"preload",value:function(){}},{key:"create",value:function(){var e=this,t=this.cameras.main;t.setBounds(0,0,t.width,4.5*t.height);var i=t.getBounds();new Scrollbar(this,{x:t.width-40,y:4,width:30,height:t.height-20,orientation:"vertical",barThickness:24,padding:4,radius:12,trackAlpha:.7}).on("move",function(e){var n=t.height/2+(i.height-t.height)*e;t.centerOnY(n)},this),this.add.dynamicBitmapText(t.width-150,20,"pixel",this.TG.tr("LEVELSELECT.MENU")).setInteractive().setScrollFactor(0).setDepth(3).setTint(0).on("pointerdown",function(){e.changeScene(e,n.Levels.MENU,0)});var o=this.TG.getActualLang()+"_"+n.Textures.BG_CREDITS;this.bg1=this.add.image(0,0,o).setOrigin(0).setScale(1),this.bg2=this.add.image(0,this.bg1.height,n.Textures.BG_CREDITS_PAGE2).setOrigin(0).setScale(1)}},{key:"update",value:function(e,t){}}])&&ge(i.prototype,o),t}();function Oe(e){return(Oe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Se(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function _e(e){return(_e=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Te(e,t){return(Te=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var we=function(e){function t(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(e=function(e,t){return!t||"object"!==Oe(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}(this,_e(t).call(this,{key:n.Levels.LEVEL2}))).target=n.Levels.LEVEL3,e}var i,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Te(e,t)}(t,J),i=t,(o=[{key:"preload",value:function(){this.scene.launch("UI")}},{key:"create",value:function(){var e=this;this.createDaniela(),this.createRepeatedBackground(n.Textures.BG_LEVEL2,defaultStatus,defaultStatus,{x:1.25,y:1.25}),this.findAndLoadEnemiesFromMap(n.Enemies_Layers.Level2),this.createCoins(),this.createHealthText(),this.paintLayerAndCreateCollision(n.Tiles.FOREST_PACK),this.paintLayerAndCreateCollision(n.Tiles.FOREST_PACK,"Landscape",!1);var t=this.paintLayerAndCreateCollision(n.Tiles.FOREST_PACK,"Wall");this.findTransparentObjects(n.Layers.LIMITS,n.Sprites.Limit.KEY,!1,!0),this.audioLevel2_LOLO_LookWhatIHaveFound_13=this.sound.add(this.TG.getActualLang()+"_"+n.Sound.LEVEL2.LOLO_ANSWER),this.addEventForMusic(this.audioLevel2_LOLO_LookWhatIHaveFound_13),this.audioLevel2_LOLO_YouHaveToFindTheLever_15=this.sound.add(this.TG.getActualLang()+"_"+n.Sound.LEVEL2.LOLO_TASK),this.addEventForMusic(this.audioLevel2_LOLO_YouHaveToFindTheLever_15,!1,1e4),this.music=this.sound.add(n.Sound.BONUSLEVEL.BSO),this.addEventForMusic(this.music,!0,15e3),this.soundLOLO_Bien_lo_hemos_conseguido=this.sound.add(this.TG.getActualLang()+"_"+n.Sound.LEVELALL.WEDIDIT),this.textDialog=this.add.dynamicBitmapText(30,this.cameras.main.height-75,n.Fonts.PIXEL,this.TG.tr("LEVEL2.FINDCLOTHES")+"\n\n"+this.TG.tr("LEVEL2.FINDLEVER"),10),this.textDialog.setScrollFactor(0),this.textDialog.setDepth(3),this.cavemanclothes=this.createEndLevelObject(n.Sprites.Cavemen_Clothes.KEY),this.physics.world.enable(this.cavemanclothes),this.cavemanclothe=this.cavemanclothes[0],this.cavemanclothe.setScale(2.75),this.cavemanclothe.body.setAllowGravity(!1),this.anims.play(n.Anims.CAVEMAN_CLOTHES,this.cavemanclothe),this.joysticks=this.map.createFromObjects("ActionButton","openwall",n.Sprites.Joystick.KEY),this.physics.world.enable(this.joysticks),this.joystick=this.joysticks[0],this.joystick.setScale(1.5),this.joystick.body.setAllowGravity(!1),this.anims.play(n.Anims.JOYSTICK,this.joystick),this.physics.add.collider(this.daniela,this.joystick,function(){e.joystick.destroy(),t.setCollisionByExclusion([0]),t.alpha=0}),this.physics.add.collider(this.daniela,this.cavemanclothe,function(){e.music.stop(),e.cavemanclothe.destroy(),e.soundLOLO_Bien_lo_hemos_conseguido.play(),e.daniela.nextScene()})}},{key:"update",value:function(e,t){var i=this;this.daniela.update(e,t),Object.keys(this.enemyGroups).forEach(function(e){i.enemyGroups[e].update()})}}])&&Se(i.prototype,o),t}();function De(e){return(De="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Be(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Ae(e){return(Ae=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function xe(e,t){return(xe=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var ke=function(e){function t(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(e=function(e,t){return!t||"object"!==De(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}(this,Ae(t).call(this,{key:n.Levels.LEVEL3}))).target=n.Levels.LEVEL4,e}var i,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&xe(e,t)}(t,J),i=t,(o=[{key:"create",value:function(){var e=this;this.createDaniela(n.Sprites.DanielaTroglo),this.createRepeatedBackground(n.Textures.BG_LEVEL3,defaultStatus,defaultStatus,{x:1,y:1}),this.findAndLoadEnemiesFromMap(n.Enemies_Layers.Level3),this.createCoins(),this.createHealthText(),this.paintLayerAndCreateCollision(n.Tiles.GRASS_TILES),this.paintLayerAndCreateCollision(n.Tiles.GRASS_TILES,n.Layers.LANDSCAPE,!1),this.findTransparentObjects(n.Layers.SPIKES,n.Sprites.Spike.KEY,!0),this.fruitsCollected=10,this.fruitDelay=!1,this.music=this.sound.add(n.Sound.BONUSLEVEL.BSO),this.addEventForMusic(this.music,!0),this.soundLOLO_Bien_lo_hemos_conseguido=this.sound.add(this.TG.getActualLang()+"_"+n.Sound.LEVELALL.WEDIDIT),this.textDialog=this.add.dynamicBitmapText(30,570,"pixel",n.Texts.BUSCAR_ROPA_TROGLODITA.toUpperCase(),16),this.textDialog.setScrollFactor(0),this.textDialog.setDepth(3),this.textFruits=this.add.dynamicBitmapText(30,60,"pixel",this.TG.tr("LEVEL3.FRUITS")+" "+this.fruitsCollected),this.textFruits.setScrollFactor(0),this.textFruits.setDepth(3),this.mamuts=this.createEndLevelObject(n.Sprites.Mamut.KEY),this.physics.world.enable(this.mamuts),this.mamut=this.mamuts[0],this.mamut.setScale(.55),this.mamut.body.setSize(200,20),this.mamut.body.setImmovable(!0),this.mamut.body.setAllowGravity(!1),this.anims.play(n.Anims.MAMUT.SLEEP,this.mamut),this.fruitsArray=["avocado.png","banana.png","cherry.png","cherry.png","watermelon.png"],this.fruits=this.map.createFromObjects("Fruits","fruit",{key:"fruits"}),this.fruitsGroup=this.physics.add.group(),this.fruits.map(function(t){var i=e.add.sprite(t.x,t.y,"fruits",e.fruitsArray[Phaser.Math.Between(0,4)]);t.destroy(),e.fruitsGroup.add(i)}),this.fruitsGroup.children.iterate(function(e){e.body.setAllowGravity(!1),e.setDepth(3)}),this.physics.add.overlap(this.daniela,this.fruitsGroup,function(e,t){var i=this;this.fruitDelay||(0<this.fruitsCollected&&this.fruitsCollected--,this.fruitDelay=!0,this.textFruits.setText(this.TG.tr("LEVEL3.FRUITS")+" "+this.fruitsCollected),this.tweens.add({targets:t,y:t.y-100,alpha:0,duration:800,ease:"Cubic.easeOut",callbackScope:this,onComplete:function(){this.fruitsGroup.killAndHide(t),this.fruitsGroup.remove(t),console.log(this.fruitsCollected)}}),0===this.fruitsCollected&&this.anims.play(n.Anims.MAMUT.HAPPY,this.mamut),this.time.addEvent({delay:600,callback:function(){i.fruitDelay=!1},callbackScope:this}))},null,this),this.physics.add.overlap(this.daniela,this.mamut,function(){0===e.fruitsCollected&&(e.fruitsCollected=-1,e.music.stop(),e.soundLOLO_Bien_lo_hemos_conseguido.play(),console.log("Daniela encuentra pulsera magica"),e.daniela.nextScene())})}},{key:"update",value:function(e,t){var i=this;this.daniela.update(e,t),Object.keys(this.enemyGroups).forEach(function(e){i.enemyGroups[e].update()})}},{key:"col",value:function(){console.log("colision")}},{key:"checkOverlap",value:function(e,t){return Phaser.Rectangle.intersects(boundsA,boundsB)}}])&&Be(i.prototype,o),t}();function je(e){return(je="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ce(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Ie(e){return(Ie=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Pe(e,t){return(Pe=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Ne=function(e){function t(e,i,n,o){var s;return function(e,i){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this),(s=function(e,t){return!t||"object"!==je(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}(this,Ie(t).call(this,e,i,n))).createLianas(i,o),s}var i,n;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Pe(e,t)}(t,Phaser.Physics.Arcade.Group),i=t,(n=[{key:"createLianas",value:function(e,t){var i=this;t.map(function(e){i.add(e),i.configureLianasBodys(e,t)})}},{key:"configureLianasBodys",value:function(e,t){e.body.setAllowGravity(!1),e.body.setSize(1,e.height),e.isAFalseLiana=!1,1<Phaser.Math.Between(0,3)&&(e.isAFalseLiana=!0)}}])&&Ce(i.prototype,n),t}();function Ge(e){return(Ge="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Me(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Ve(e){return(Ve=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Fe(e,t){return(Fe=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Re=function(e){function t(e,i,n,o){var s;return function(e,i){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this),(s=function(e,t){return!t||"object"!==Ge(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}(this,Ve(t).call(this,e,i,n))).createLianas(i,o),s}var i,n;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Fe(e,t)}(t,Phaser.Physics.Arcade.Group),i=t,(n=[{key:"createLianas",value:function(e,t){var i=this;t.map(function(e){i.add(e),i.configureLianasEnd(e,t)})}},{key:"configureLianasEnd",value:function(e,t){e.body.setAllowGravity(!1),e.body.setSize(1,1),e.alpha=0}}])&&Me(i.prototype,n),t}();function Ue(e){return(Ue="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ye(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Je(e){return(Je=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Ke(e,t){return(Ke=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var We=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){return!t||"object"!==Ue(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}(this,Je(t).call(this,{key:n.Levels.LEVEL4}))}var i,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ke(e,t)}(t,J),i=t,(o=[{key:"create",value:function(){this.createDaniela(n.Sprites.DanielaTroglo),this.createRepeatedBackground(n.Textures.BG_LEVEL4,defaultStatus,defaultStatus,{x:1.3,y:1.3}),this.findAndLoadEnemiesFromMap(n.Enemies_Layers.Level4),this.createCoins(),this.createHealthText(),this.soundLOLO_Bien_lo_hemos_conseguido=this.sound.add(this.TG.getActualLang()+"_"+n.Sound.LEVELALL.WEDIDIT),this.music=this.sound.add(n.Sound.BONUSLEVEL.BSO),this.addEventForMusic(this.music,!0),this.textDialog=this.add.dynamicBitmapText(30,570,"pixel",n.Texts.BUSCAR_ROPA_TROGLODITA.toUpperCase(),16),this.textDialog.setScrollFactor(0),this.textDialog.setDepth(3),this.paintLayerAndCreateCollision(n.Tiles.JUNGLE),this.paintLayerAndCreateCollision(n.Tiles.JUNGLE,n.Layers.LANDSCAPE,!1);var e=this.findTransparentObjects("Water","Water",!1);this.physics.add.overlap(this.daniela,e,this.daniela.waterCollision),this.liana=this.createLianas(),this.groupOfLianas=new Ne(this.physics.world,this,[],this.liana),this.endOfLiana=this.createEndOfLianas(),this.groupOfEndOfLianas=new Re(this.physics.world,this,[],this.endOfLiana),console.log(this.groupOfEndOfLianas),this.physics.add.overlap(this.daniela,this.groupOfLianas,this.danielaOverLiana,null,this),this.physics.add.overlap(this.daniela,this.groupOfEndOfLianas,this.danielaOverEndOfLiana,null,this)}},{key:"update",value:function(e,t){var i=this;this.daniela.update(e,t),Object.keys(this.enemyGroups).forEach(function(e){i.enemyGroups[e].update()}),4700<this.daniela.x&&!this.daniela.reachedTheEnd&&(this.soundLOLO_Bien_lo_hemos_conseguido.play(),this.daniela.nextScene(),this.daniela.reachedTheEnd=!0)}},{key:"danielaOverLiana",value:function(e,t){e.x=t.x,e.isInLiana=!0,this.daniela.body.velocity.x=0,t.isAFalseLiana?t.body.setAllowGravity(!0):(e.body.setAllowGravity(!1),this.daniela.body.velocity.y=0)}},{key:"danielaOverEndOfLiana",value:function(e,t){this.daniela.y+=10,e.isInLiana=!1,e.body.setAllowGravity(!0)}},{key:"crocodileChangeDirection",value:function(e){e.isGoingLeft?(e.setScale(-1,1),e.body.setVelocityX(e.velX),e.isGoingLeft=!1):(e.setScale(1,1),e.body.setVelocityX(-e.velX),e.isGoingLeft=!0)}}])&&Ye(i.prototype,o),t}();function He(e){return(He="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ze(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Xe(e){return(Xe=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Ze(e,t){return(Ze=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var qe,Qe,$e,et,tt,it,nt,ot,st=function(e){function t(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(e=function(e,t){return!t||"object"!==He(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}(this,Xe(t).call(this,{key:n.Levels.LEVEL5}))).target=n.Levels.LEVEL6,e}var i,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ze(e,t)}(t,J),i=t,(o=[{key:"preload",value:function(){this.scene.launch("UI")}},{key:"create",value:function(){var e=this;this.createDaniela(n.Sprites.DanielaTroglo),this.createRepeatedBackground(n.Textures.BG_LEVEL5),this.music=this.sound.add(n.Sound.BONUSLEVEL.BSO),this.addEventForMusic(this.music,!0),this.platformlayer=this.paintLayerAndCreateCollision(n.Tiles.WOODS),this.platformlayer.visible=!1,this.paintLayerAndCreateCollision(n.Tiles.WOODS,"Landscape",!1),this.leaves=this.map.createFromObjects("Branches","leaves","woodsbranches"),this.physics.world.enable(this.leaves),this.leaves.forEach(function(e){e.body.setAllowGravity(!1),e.setDepth(4),e.setTexture("woodsbranches","leaves")});for(var t=function(t){e.branches=e.map.createFromObjects("Branches","branch-0"+t,"woodsbranches"),e.physics.world.enable(e.branches),e.branches.forEach(function(e){e.body.setAllowGravity(!1),e.setDepth(4),e.setTexture("woodsbranches","branch-0"+t)})},i=1;i<=5;i++)t(i)}},{key:"update",value:function(e,t){var i=this;this.daniela.update(e,t),Object.keys(this.enemyGroups).forEach(function(e){i.enemyGroups[e].update()})}}])&&ze(i.prototype,o),t}();function at(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var rt=function(){function e(t){var i=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};!function(t,i){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this),qe=void 0===i.borderSize?1:i.borderSize,Qe=i.borderColor||0,$e=i.backgroundColor||0,et=void 0===i.backgroundOpacity?.85:i.backgroundOpacity,tt=void 0===i.originX?0:i.originX,it=void 0===i.originY?0:i.originY,nt=void 0===i.width?3e3:i.width,ot=void 0===i.height?3e3:i.height,this.graphic=t.add.graphics(),this.graphic.visible=!1,this.createMask()}var t,i;return t=e,(i=[{key:"createMask",value:function(){this.graphic.lineStyle(qe,Qe),this.graphic.fillStyle($e,et),this.graphic.fillRect(tt,it,nt,ot)}},{key:"show",value:function(){this.graphic.visible=!0}},{key:"hide",value:function(){var e=!(0<arguments.length&&void 0!==arguments[0])||arguments[0];this.graphic.visible=!1,e&&this.graphic.destroy()}}])&&at(t.prototype,i),e}();function lt(e){return(lt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ct(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function ut(e){return(ut=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ht(e,t){return(ht=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var dt=function(e){function t(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(e=function(e,t){return!t||"object"!==lt(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}(this,ut(t).call(this,{key:n.Levels.LEVEL6}))).target=n.Levels.CREDITS,e}var i,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ht(e,t)}(t,J),i=t,(o=[{key:"create",value:function(){var e=this;this.createDaniela(n.Sprites.DanielaTroglo),this.createRepeatedBackground(n.Textures.BG_LEVEL6),this.findAndLoadEnemiesFromMap(n.Enemies_Layers.Level6),this.createCoins(),this.createHealthText(),this.music=this.sound.add(n.Sound.LEVEL6.BSO),this.addEventForMusic(this.music,!0,100),this.paintLayerAndCreateCollision(n.Tiles.VOLCANO),this.paintLayerAndCreateCollision(n.Tiles.VOLCANO,n.Layers.LANDSCAPE,!1),this.findTransparentObjects(n.Layers.LIMITS,n.Sprites.Limit.KEY,!1,!0),this.textDialog=this.add.dynamicBitmapText(30,570,"pixel","Busca el portal...",16),this.textDialog.setScrollFactor(0),this.textDialog.setDepth(3);var t={x:this.daniela.x,y:this.daniela.y},i=this.physics.add.group();this.map.findObject("Maps",function(t){if("Map"===t.type){var o=i.create(t.x,t.y);o.mapId=t.properties[0].value,e.anims.play(n.Anims.MAP,o),i.add(o)}}),i.children.iterate(function(e){return e.body.setAllowGravity(!1)}),this.physics.add.overlap(this.daniela,i,function(i,n){var o=new rt(e);o.show(),t.x=n.x,t.y=n.y;var s=e.add.image(e.daniela.x+150,e.daniela.y-75,n.mapId).setDepth(1).setScale(.35);s.setInteractive();var a=!1;s.on("pointerdown",function(){a=!0,e.closeMap(o,s)}),n.destroy(),e.daniela.body.setVelocity(0,0),e.scene.scene.physics.pause(),e.scene.scene.time.addEvent({delay:5e3,callback:function(){a||e.closeMap(o,s)}})});var o=this.findTransparentObjects("Lava","Lava",!0);this.physics.add.overlap(this.daniela,o,function(){e.cameras.main.fadeIn(1500),e.daniela.body.setVelocity(0,0),e.daniela.x=t.x,e.daniela.y=t.y});var s=this.createEndLevelObject("timedoor");this.physics.world.enable(s),s[0].setScale(.5),s[0].body.setAllowGravity(!1),this.physics.add.collider(this.daniela,s,function(){e.daniela.nextScene()})}},{key:"closeMap",value:function(e,t){e.hide(),t.destroy(),this.scene.scene.physics.resume()}},{key:"update",value:function(e,t){var i=this;this.daniela.update(e,t),Object.keys(this.enemyGroups).forEach(function(e){i.enemyGroups[e].update()})}},{key:"showMap",value:function(e){}}])&&ct(i.prototype,o),t}();function pt(e){return(pt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ft(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function yt(e){return(yt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function mt(e,t){return(mt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var bt=function(e){function t(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(e=function(e,t){return!t||"object"!==pt(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}(this,yt(t).call(this,{key:n.Levels.LEVEL1}))).target=n.Levels.LEVEL2,e}var i,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&mt(e,t)}(t,J),i=t,(o=[{key:"create",value:function(){var e=this;this.createDaniela(),this.createBackground(n.Textures.BG_LEVEL1,defaultStatus,defaultStatus,defaultStatus,defaultStatus,{x:.65,y:.65}),this.findAndLoadEnemiesFromMap(n.Enemies_Layers.Level1),this.createCoins(),this.createHealthText(),this.paintLayerAndCreateCollision(n.Tiles.CAVE_STONE),this.paintLayerAndCreateCollision(n.Tiles.CAVE_STONE,n.Layers.LANDSCAPE,!1),this.findTransparentObjects(n.Layers.SPIKES,n.Sprites.Spike.KEY,!0),this.textDialog=this.add.dynamicBitmapText(30,this.cameras.main.height-50,n.Fonts.PIXEL,this.TG.tr("LEVEL1.FINDBRACELET")),this.textDialog.setScrollFactor(0),this.textDialog.setDepth(3),this.soundLEVEL1_LOLO_findBracelet=this.sound.add(this.TG.getActualLang()+"_"+n.Sound.LEVEL1.FINDBRACELET),this.addEventForMusic(this.soundLEVEL1_LOLO_findBracelet),this.musicbg=this.sound.add(n.Sound.LEVEL1.BSO),this.addEventForMusic(this.musicbg,!0,2e3),this.soundLOLO_Bien_lo_hemos_conseguido=this.sound.add(this.TG.getActualLang()+"_"+n.Sound.LEVELALL.WEDIDIT),this.bracelets=this.createEndLevelObject(n.Sprites.Bracelet.KEY),this.physics.world.enable(this.bracelets),this.magicbracelet=this.bracelets[0],this.magicbracelet.setScale(.75),this.magicbracelet.body.setAllowGravity(!1),this.anims.play(n.Anims.BRACELET,this.magicbracelet),this.physics.add.collider(this.daniela,this.magicbracelet,function(){e.musicbg.stop(),e.magicbracelet.destroy(),e.addEventForMusic(e.soundLOLO_Bien_lo_hemos_conseguido),e.daniela.nextScene()})}},{key:"update",value:function(e,t){var i=this;this.daniela.update(e,t),Object.keys(this.enemyGroups).forEach(function(e){i.enemyGroups[e].update()})}}])&&ft(i.prototype,o),t}();function gt(e){return(gt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function vt(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Et(e){return(Et=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Lt(e,t){return(Lt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Ot=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){return!t||"object"!==gt(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}(this,Et(t).call(this,{key:"IntroStory"}))}var i,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Lt(e,t)}(t,Phaser.Scene),i=t,(o=[{key:"preload",value:function(){console.log("Scene: IntroStory")}},{key:"create",value:function(){var e=this;this.run=!1,this.musicBg=this.sound.add(n.Sound.LEVEL0.BSO),this.musicBg.play(),this.musicBg.setLoop(!0),this.musicFalling=this.sound.add("falling"),this.height=this.cameras.main.height,this.width=this.cameras.main.width;var t=this.add.dynamicBitmapText(this.width-100,20,"pixel",this.TG.tr("LEVELINTRO.SKIP"));t.setPosition(this.width-t.width-30,20),t.setInteractive().setDepth(2),t.on("pointerdown",function(){e.cameras.main.fade(700,0,0,0),e.cameras.main.on("camerafadeoutcomplete",function(){e.musicBg.stop(),e.scene.start(n.Levels.LEVEL1)})}),this.bgparallax=[];for(var i=8;1<=i;i--)this.bgparallax[i]=this.add.tileSprite(0,0,this.width,this.height,"layer_0"+i).setOrigin(0);this.anims.create({key:"run",frames:this.anims.generateFrameNumbers("daniela_intro",{start:0,end:1}),frameRate:8,repeat:-1}),this.anims.create({key:"fly",frames:this.anims.generateFrameNumbers("lolo_intro",{start:0,end:5}),frameRate:8,repeat:-1}),this.player=this.physics.add.sprite(200,325,"daniela_intro"),this.player.setDepth(2),this.player.flipX=!0,this.player.body.setAllowGravity(!1),this.player.anims.play("run"),this.lolo=this.physics.add.sprite(130,240,"lolo_intro"),this.lolo.setDepth(2),this.lolo.flipX=!0,this.lolo.body.setAllowGravity(!1),this.lolo.anims.play("fly"),this.textDialog=this.add.dynamicBitmapText(30,this.height-50,"pixel",this.TG.tr("LEVELINTRO.DANIELA_MUM")),this.textDialog.setScrollFactor(0),this.textDialog.setDepth(3),this.textDialog.setAlpha(0),this.sound_LEVELINTRO_WHERE_ARE_YOU=this.sound.add(this.TG.getActualLang()+"_"+n.Sound.LEVEL0.DANIELA_MUM),this.sound_LEVELINTRO_I_ARRIVE_IN_5MINS=this.sound.add(this.TG.getActualLang()+"_"+n.Sound.LEVEL0.DANIELA_ANSWER),this.time.addEvent({delay:4e3,callback:function(){e.textDialog.setAlpha(1),e.sound_LEVELINTRO_WHERE_ARE_YOU.play()},callbackScope:this}),this.textDialog2=this.add.dynamicBitmapText(30,this.height-50,"pixel",this.TG.tr("LEVELINTRO.DANIELA_ANSWER")),this.textDialog2.setScrollFactor(0),this.textDialog2.setDepth(3),this.textDialog2.setAlpha(0),this.time.addEvent({delay:1e4,callback:function(){e.textDialog.setAlpha(0),e.textDialog2.setAlpha(1),e.sound_LEVELINTRO_I_ARRIVE_IN_5MINS.play()},callbackScope:this}),this.door=this.physics.add.sprite(600,300,"timedoor"),this.door.body.setImmovable(!0),this.door.body.setAllowGravity(!1),this.door.setAlpha(0),this.time.addEvent({delay:14e3,callback:function(){e.textDialog2.setAlpha(0)},callbackScope:this}),this.time.addEvent({delay:17e3,callback:function(){e.textDialog2.setAlpha(0),e.door.setAlpha(1)},callbackScope:this}),this.time.addEvent({delay:19e3,callback:function(){e.musicFalling.play(),e.run=!0},callbackScope:this}),this.passthedoor=!1,this.physics.add.overlap(this.player,this.door,function(){e.passthedoor||(e.passthedoor=!0,e.cameras.main.shake(1e3),e.cameras.main.fade(5e3,0,0,0),e.time.addEvent({delay:700,callback:function(){for(var t=1;t<=8;t++)e.bgparallax[t].setAlpha(0)},callbackScope:e}),e.cameras.main.on("camerafadeoutcomplete",function(){e.musicBg.stop(),e.scene.start(n.Levels.LEVEL1)}))})}},{key:"update",value:function(e,t){for(var i=1;i<=8;i++)this.bgparallax[i].tilePositionX+=.8-.1*i;this.run&&(this.player.setVelocityX(150),this.lolo.setVelocityX(150))}},{key:"runToDoor",value:function(){}}])&&vt(i.prototype,o),t}();function St(e){return(St="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _t(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Tt(e){return(Tt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function wt(e,t){return(wt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Dt=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){return!t||"object"!==St(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}(this,Tt(t).call(this,"Bootloader"))}var i,n;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&wt(e,t)}(t,Phaser.Scene),i=t,(n=[{key:"preload",value:function(){var e=this;console.log("Bootloader :D"),this.load.script("scrollbar","./libs/Scrollbars.js"),this.load.path="./assets/",this.load.pack("assets_import","assets_import.json","assets"),this.load.pack("maps","../src/worlds/maps.json","maps"),this.load.image("timedoor","img/objects/timedoor.png");for(var t=1;t<=8;t++)this.load.image("layer_0"+t,"img/backgrounds/parallax_intro/layer_0"+t+"_854x480.png");this.load.spritesheet("daniela_intro","img/daniela/danielaintro.png",{frameWidth:124,frameHeight:132}),this.load.spritesheet("lolo_intro","img/lolo/lolo_intro.png",{frameWidth:64,frameHeight:64});for(var i=1;i<=5;i++)this.load.image("bonus_plx_"+i,"img/backgrounds/parallax_bonus/plx-"+i+".png");this.load.atlas("puzzlepiece","img/objects/puzzlepiece/puzzlepiece.png","img/objects/puzzlepiece/puzzlepiece_atlas.json"),this.load.animation("puzzlepieceAnim","img/objects/puzzlepiece/puzzlepiece_anim.json"),this.load.tilemapTiledJSON("Level2","../src/worlds/level2/forestmap.json"),this.load.image("forestPack_32x32","../src/worlds/level2/forestPack_32x32.png"),this.load.tilemapTiledJSON("Level3","../src/worlds/level3/grasstiles.json"),this.load.image("grasstiles","../src/worlds/level3/grasstiles.png"),this.load.tilemapTiledJSON("Level4","../src/worlds/level4/level4.json"),this.load.image("jungle","../src/worlds/level4/Jungle_guide.png"),this.load.image("liana","img/jungle/liane.png"),this.load.image("endOfLiana","img/jungle/endOfLiana.png"),this.load.atlas("crocodile","img/jungle/crocodile.png","img/jungle/crocodile_atlas.json"),this.load.animation("crocodileAnim","img/jungle/crocodile_anim.json"),this.load.tilemapTiledJSON("Level5","../src/worlds/level5/map.json"),this.load.image("woods","../src/worlds/level5/tileset.png"),this.load.atlas("woods5sprites","img/woods/atlas.png","img/woods/atlas.json"),this.load.atlas("woodsbranches","img/woods/atlas-props.png","img/woods/atlas-props.json"),this.load.tilemapTiledJSON("Level6","../src/worlds/level6/level6.json"),this.load.image("spritesheet","../src/worlds/level6/spritesheet.png"),this.load.image("bg_Menu","img/backgrounds/dibujoPortadaEscaneado.png"),this.load.image("bg_Level1","img/backgrounds/2560x1440-snapSat1800.jpg"),this.load.image("bg_Level2","img/backgrounds/bg_forest.png"),this.load.image("bg_Level3","img/backgrounds/background_level3.png"),this.load.image("bg_Level4","img/backgrounds/Ocean.png"),this.load.image("bg_Level5","img/backgrounds/bg_level5_2130x1280.png"),this.load.image("bg_Level6","img/backgrounds/bg_volcano.png"),this.load.image("map_1","img/objects/map/map_1.png"),this.load.image("map_2","img/objects/map/map_2.png"),this.load.image("map_3","img/objects/map/map_3.png"),this.load.image("en_Credits","img/backgrounds/en_credits_800w.png"),this.load.image("es_Credits","img/backgrounds/es_credits_800w.png"),this.load.image("creditsPage2","img/backgrounds/credits_page2.png"),this.load.image("es_flag","img/settings/es.png"),this.load.image("en_flag","img/settings/gb.png"),this.load.image("it_flag","img/settings/it.png"),this.load.image("de_flag","img/settings/de.png"),this.load.atlas("bats","img/bat/bats.png","img/bat/bats_atlas.json"),this.load.animation("batsAnim","img/bat/bats_anim.json"),this.load.atlas("bee","img/bee/bee.png","img/bee/bee_atlas.json"),this.load.animation("beeAnim","img/bee/bee_anim.json"),this.load.atlas("soda","img/soda/soda.png","img/soda/soda_atlas.json"),this.load.animation("sodaAnim","img/soda/soda_anim.json"),this.load.atlas("mamut","img/mamut/mamut.png","img/mamut/mamut_atlas.json"),this.load.animation("mamutAnim","img/mamut/mamut_anim.json"),this.load.atlas("fruits","img/fruits/fruits.png","img/fruits/fruits.json"),this.load.atlas("snail","img/snail/snail.png","img/snail/snail_atlas.json"),this.load.animation("snailAnim","img/snail/snail_anim.json"),this.load.atlas("bracelet","img/objects/bracelet/bracelet.png","img/objects/bracelet/bracelet_atlas.json"),this.load.animation("braceletAnim","img/objects/bracelet/bracelet_anim.json"),this.load.atlas("caveman_clothes","img/objects/caveman_clothes/caveman_clothes.png","img/objects/caveman_clothes/caveman_clothes_atlas.json"),this.load.animation("caveman_clothesAnim","img/objects/caveman_clothes/caveman_clothes_anim.json"),this.load.atlas("wheel","img/wheelStone/wheelStone_32x32.png","img/wheelStone/wheelStone_32x32_atlas.json"),this.load.animation("wheelAnim","img/wheelStone/wheelStone_32x32_anim.json"),this.load.atlas("donut","img/donut/donut.png","img/donut/donut_atlas.json"),this.load.animation("donutAnim","img/donut/donut_anim.json"),this.load.image("water","img/objects/water-tile.png"),this.load.atlas("joystick","img/objects/joystick/joystick.png","img/objects/joystick/joystick_atlas.json"),this.load.animation("joystickAnim","img/objects/joystick/joystick_anim.json"),this.load.image("platform","img/objects/platform.png"),this.load.atlas("extrapoint","img/objects/extrapoint/extrapoint.png","img/objects/extrapoint/extrapoint_atlas.json"),this.load.animation("extrapointAnim","img/objects/extrapoint/extrapoint_anim.json"),this.load.image("star","img/objects/star.png"),this.load.image("play","img/objects/PlayButton.png"),this.load.image("play2","img/objects/PlayButton2.png"),this.load.image("lock","img/objects/Lock.png"),this.load.spritesheet("fire","img/objects/fire.png",{frameWidth:40,frameHeight:70}),this.load.atlas("dinobird","img/dinobird/dinobird.png","img/dinobird/dinobird_atlas.json"),this.load.animation("dinobirdAnim","img/dinobird/dinobird_anim.json"),this.load.atlas("dinowater","img/dinowater/dinowater.png","img/dinowater/dinowater_atlas.json"),this.load.animation("dinowaterAnim","img/dinowater/dinowater_anim.json"),this.load.atlas("map","img/objects/map/map.png","img/objects/map/map_atlas.json"),this.load.animation("mapAnim","img/objects/map/map_anim.json"),this.load.image("volumeOn","img/ui/volumeON.png"),this.load.image("volumeOff","img/ui/volumeOFF.png"),this.load.image("controlUp","img/ui/controlUp.png"),this.load.image("controlDown","img/ui/controlDown.png"),this.load.image("controlRight","img/ui/controlRight.png"),this.load.image("controlLeft","img/ui/controlLeft.png"),this.load.json("fontJSON","font/font.json"),this.load.image("font","font/font.png"),this.load.audio("BonusLevel_BSO","sounds/bso/BonusLevel_BSO.ogg"),this.load.audio("LevelIntro_BSO","sounds/bso/LevelIntro_BSO.ogg"),this.load.audio("Level1_BSO","sounds/bso/Level1_BSO.ogg"),this.load.audio("Level6_BSO","sounds/bso/Level6_BSO.ogg"),this.load.audio("Main_BSO","sounds/bso/Main_BSO.ogg"),this.load.audio("BirdSinging","sounds/backgrounds/birds-singing.mp3"),this.load.on("progress",function(t){e.registry.events.emit("load_progress",t)}),this.load.lang(),this.scene.launch("AudioLoader"),this.load.on("complete",function(){var t=e.cache.json.get("fontJSON");e.cache.bitmapFont.add("pixel",Phaser.GameObjects.RetroFont.Parse(e,t)),e.scene.stop("Loader"),e.scene.stop("AudioLoader"),e.scene.stop("Bootloader"),e.scene.start("Menu")})}}])&&_t(i.prototype,n),t}();function Bt(e){return(Bt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function At(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function xt(e){return(xt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function kt(e,t){return(kt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var jt=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){return!t||"object"!==Bt(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}(this,xt(t).call(this,"AudioLoader"))}var i,n;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&kt(e,t)}(t,Phaser.Scene),i=t,(n=[{key:"preload",value:function(){console.log("AudioLoader :D");var e=this.TG.getActualLang();console.log(e),this.loadAudio(e+"_Level0_MOTHER_WhereAreYou_01"),this.loadAudio(e+"_Level0_DANIELA_5Mins_02"),this.loadAudio(e+"_Level1_LOLO_MagicBracelet_03"),this.loadAudio(e+"_Level2_DANIELA_WhereDidYouGetThat_05"),this.loadAudio(e+"_Level2_LOLO_ToBeAbleToContinue_06"),this.loadAudio(e+"_Level2_LOLO_LookWhatIHaveFound_13"),this.loadAudio(e+"_Level2_LOLO_LookForTheMap_14"),this.loadAudio(e+"_Level2_LOLO_YouHaveToFindTheLever_15"),this.loadAudio(e+"_Level3_DANIELA_WhatAProblem_07"),this.loadAudio(e+"_Level3_LOLO_YouHaveToGiveMammoth_08"),this.loadAudio(e+"_Level5_LOLO_YouWillHaveToCatch_09"),this.loadAudio(e+"_Level5_DANIELA_ThatFruitLooksSoGood_10"),this.loadAudio(e+"_Level5_LOLO_InOrderToCatchTheFruit_11"),this.loadAudio(e+"_Level6_DANIELA_OhIBurntMyself_12"),this.loadAudio(e+"_Level6_LOLO_GetAllTheObjects_17"),this.loadAudio(e+"_LevelAll_DANIELA_WeDidIt_04"),this.loadAudio(e+"_LevelAll_LOLO_RecoverOnleLife_16"),this.load.path="./assets/",this.load.audio("lolo_auch","sounds/pain.mp3"),this.load.audio("coinpickup","sounds/coinpickup.mp3"),this.load.audio("falling","sounds/backgrounds/falling.mp3"),this.load.audio("soundJump","sounds/jump.mp3"),this.load.audio("danielaAuch","sounds/Daniela_Auch.ogg"),this.load.audio("levelUp","sounds/backgrounds/LevelUp.ogg")}},{key:"loadAudio",value:function(e){this.load.path="./assets/",this.load.audio(e,"sounds/dialogs/"+e+".ogg")}}])&&At(i.prototype,n),t}();function Ct(e){return(Ct="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function It(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Pt(e){return(Pt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Nt(e,t){return(Nt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Gt=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){return!t||"object"!==Ct(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}(this,Pt(t).call(this,"Loader"))}var i,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Nt(e,t)}(t,Phaser.Scene),i=t,(o=[{key:"init",value:function(){Z.createDB([{key:n.DB.DBNAME,value:Z.DB}])}},{key:"preload",value:function(){this.scene.launch("Bootloader");var e=this.cameras.main.width,t=this.cameras.main.height,i=e/2-10,n=t/2+30,o=this.add.graphics(),s=this.add.graphics();s.fillStyle(16777215,.5),s.fillRect(i-140,n-10,320,50),this.make.text({x:e/2-5,y:t/2-30,text:"Loading...",style:{font:"20px monospace",fill:"#ffffff"}}).setOrigin(.5,.5);var a=this.make.text({x:e/2-10,y:t/2-2,text:"0%",style:{font:"18px monospace",fill:"#ffffff"}});a.setOrigin(.5,.5),this.registry.events.on("load_progress",function(e){a.setText(parseInt(100*e)+"%"),o.clear(),o.fillStyle(16777215,1),o.fillRect(i-130,n,300*e,30)})}}])&&It(i.prototype,o),t}();function Mt(e){return(Mt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Vt(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Ft(e){return(Ft=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Rt(e,t){return(Rt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Ut=function(e){function t(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){return!t||"object"!==Mt(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}(this,Ft(t).call(this,e))}var i,n;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Rt(e,t)}(t,Phaser.Plugins.BasePlugin),i=t,(n=[{key:"init",value:function(e){console.log("%c Plugin Translate Gamma cargado ","color: white; font-size:15px; background-color: #e14141");var t=this;this.pluginManager.registerFileType("lang",function(){t.upload(this,e)}),this.events=new Phaser.Events.EventEmitter;var i=!0;["path","disponibleLangs","fallbackLang"].map(function(t){Object.keys(e).includes(t)?i&&(i=!0):(i=!1,console.error("Te faltó agregar esta configuración en tu config: ",t))}),i&&this.setVars(e)}},{key:"setVars",value:function(e){this.spanish_langs=void 0!==e.spanishLangs&&0<e.spanishLangs.length?e.spanishLangs:[],this.disponible_langs=e.disponibleLangs;var t=localStorage.getItem("lang_game");this.fallback_lang=e.fallbackLang,this.actual_lang=null!==t?t:this.getDeviceLang(),this.lang_cache=null}},{key:"getActualLang",value:function(){return this.actual_lang}},{key:"getDeviceLang",value:function(){var e=navigator.language.split("-")[0],t=-1!==this.spanish_langs.indexOf(e)?"es":e;return this.disponible_langs.includes(t)?t:this.fallback_lang}},{key:"setLang",value:function(e){this.disponible_langs.includes(e)?(this.actual_lang=e,this.lang_cache=this.game.cache.json.get(e),localStorage.setItem("lang_game",e),this.events.emit("update_change_lang")):console.error("Este idioma (%s) no se incluye en los idiomas seleccionados, que son: %o",e,this.disponible_langs)}},{key:"setDefaultLang",value:function(){this.actual_lang=this.getDeviceLang(),this.lang_cache=this.game.cache.json.get(this.actual_lang),localStorage.removeItem("lang_game"),this.events.emit("update_change_lang")}},{key:"tr",value:function(e){var t=this,i=1<arguments.length&&void 0!==arguments[1]?arguments[1]:null,n=e.replace("]","").split(/[.|\[]/g),o=null;if(null===this.lang_cache&&(this.lang_cache=this.game.cache.json.get(this.actual_lang)),o=this.lang_cache,n.map(function(e){void 0===o[e]?console.error("La key no existe en tu JSON. Tu key es: %s\n Y estás tratando de traducir al: %s",e,t.actual_lang):o=o[e]}),null!==i){for(var s in o=JSON.stringify(o),i){var a=new RegExp("{{[ ]{0,}".concat(s,"[ ]{0,}}}"),"g");o=o.replace(a,i[s])}o=JSON.parse(o)}return o}},{key:"upload",value:function(e,t){var i=t.disponibleLangs.map(function(i){return{key:i,url:"".concat(""===e.path?".":"..","/").concat(t.path,"/").concat(i,".json")}});e.json(i)}},{key:"on",value:function(e){var t=this;this.events.on("update_change_lang",function(){e(t.actual_lang)})}}])&&Vt(i.prototype,n),t}(),Yt={title:"HISTORICAL ADVENTURES OF DANIELA",url:"https://twitter.com/gamedev_innicia",version:"0.0.3",type:Phaser.AUTO,backgroundColor:"#000000",pixelArt:!0,zoom:1,banner:{hidePhaser:!0,text:"#000000",background:["#f4e541","#ed2a3a","#29c2ed","#c929ed","#42f4bf"]},scale:{parent:"container",mode:Phaser.Scale.FIT,autoCenter:Phaser.Scale.CENTER_BOTH,width:854,height:480},input:{gamepad:!0,queue:!0},plugins:{global:[{key:"TG",plugin:Ut,mapping:"TG",data:{path:"./src/i18n",disponibleLangs:["es","en","it","de"],fallbackLang:"en",spanishLangs:["ca","gl","es","eu"]}}]},physics:{default:"arcade",arcade:{gravity:{y:700},debug:!1}},scene:[Gt,Dt,jt,X,te,ae,he,Le,Ot,me,bt,we,ke,We,st,dt,c]};new Phaser.Game(Yt)}]);
